<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>BioStatistics - 15&nbsp; Linear Modelling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./apply03_model_non_lin.html" rel="next">
<link href="./apply01_model_diversity.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./apply00_intro.html">Modeling of Microbiome Data</a></li><li class="breadcrumb-item"><a href="./apply02_model_lin.html"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Linear Modelling</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">BioStatistics</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./tidy00_book_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tidy Modelling with R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidy01_intro_package.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to Tidy Modelling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidy02_mult_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating multiple models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidy03_hyperparam.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Tuning hyperparameters and overfitting</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stat00_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Applied bio-statistical methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat01_diversity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Diversity measures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat02_wilcoxon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Wilcoxon test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat03_mult_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Multiple testing correction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat04_OLS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Ordinary Least Squares Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat05_log_reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Logistic Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat06_enet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Elastic Net</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat07_svm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Support Vector Machines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stat08_bias_var.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Bias and Variance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./pre00_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preprocessing of Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pre01_pca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Principal Component Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pre02_umap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Uniform Manifold Approximation and Projection</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./apply00_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modeling of Microbiome Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apply01_model_diversity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Diversity Measures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apply02_model_lin.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Linear Modelling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apply03_model_non_lin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Non-Linear Modelling</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="4">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link active" data-scroll-target="#data-wrangling"><span class="header-section-number">15.1</span> Data wrangling</a></li>
  <li><a href="#cross-validation" id="toc-cross-validation" class="nav-link" data-scroll-target="#cross-validation"><span class="header-section-number">15.2</span> Cross-Validation</a></li>
  <li><a href="#recipes" id="toc-recipes" class="nav-link" data-scroll-target="#recipes"><span class="header-section-number">15.3</span> Recipes</a></li>
  <li><a href="#model-specifications" id="toc-model-specifications" class="nav-link" data-scroll-target="#model-specifications"><span class="header-section-number">15.4</span> Model Specifications</a></li>
  <li><a href="#change-hyperparameter-values" id="toc-change-hyperparameter-values" class="nav-link" data-scroll-target="#change-hyperparameter-values"><span class="header-section-number">15.5</span> Change Hyperparameter Values</a></li>
  <li><a href="#create-the-workflow-set" id="toc-create-the-workflow-set" class="nav-link" data-scroll-target="#create-the-workflow-set"><span class="header-section-number">15.6</span> Create the Workflow Set</a></li>
  <li><a href="#tune-hyperparameters" id="toc-tune-hyperparameters" class="nav-link" data-scroll-target="#tune-hyperparameters"><span class="header-section-number">15.7</span> Tune hyperparameters</a></li>
  <li><a href="#finalize-workflow" id="toc-finalize-workflow" class="nav-link" data-scroll-target="#finalize-workflow"><span class="header-section-number">15.8</span> Finalize workflow</a></li>
  <li><a href="#fit-and-predict-for-the-final-workflow" id="toc-fit-and-predict-for-the-final-workflow" class="nav-link" data-scroll-target="#fit-and-predict-for-the-final-workflow"><span class="header-section-number">15.9</span> Fit and Predict for the Final Workflow</a></li>
  <li><a href="#predict-and-visualize-performance" id="toc-predict-and-visualize-performance" class="nav-link" data-scroll-target="#predict-and-visualize-performance"><span class="header-section-number">15.10</span> Predict and visualize performance</a></li>
  <li><a href="#fine-tuning-hyperparameters" id="toc-fine-tuning-hyperparameters" class="nav-link" data-scroll-target="#fine-tuning-hyperparameters"><span class="header-section-number">15.11</span> Fine Tuning Hyperparameters</a>
  <ul>
  <li><a href="#standard-preprocessing-lasso" id="toc-standard-preprocessing-lasso" class="nav-link" data-scroll-target="#standard-preprocessing-lasso"><span class="header-section-number">15.11.1</span> Standard Preprocessing, Lasso</a></li>
  <li><a href="#standard-preprocessing-ridge" id="toc-standard-preprocessing-ridge" class="nav-link" data-scroll-target="#standard-preprocessing-ridge"><span class="header-section-number">15.11.2</span> Standard Preprocessing, Ridge</a></li>
  <li><a href="#standard-preprocessing-elastic-net" id="toc-standard-preprocessing-elastic-net" class="nav-link" data-scroll-target="#standard-preprocessing-elastic-net"><span class="header-section-number">15.11.3</span> Standard Preprocessing, Elastic Net</a></li>
  <li><a href="#pca-preprocessing-lasso" id="toc-pca-preprocessing-lasso" class="nav-link" data-scroll-target="#pca-preprocessing-lasso"><span class="header-section-number">15.11.4</span> PCA Preprocessing, Lasso</a></li>
  <li><a href="#pca-preprocessing-ridge" id="toc-pca-preprocessing-ridge" class="nav-link" data-scroll-target="#pca-preprocessing-ridge"><span class="header-section-number">15.11.5</span> PCA Preprocessing, Ridge</a></li>
  <li><a href="#pca-preprocessing-elastic-net" id="toc-pca-preprocessing-elastic-net" class="nav-link" data-scroll-target="#pca-preprocessing-elastic-net"><span class="header-section-number">15.11.6</span> PCA Preprocessing, Elastic Net</a></li>
  <li><a href="#gather-manually-chosen-hyperparameters" id="toc-gather-manually-chosen-hyperparameters" class="nav-link" data-scroll-target="#gather-manually-chosen-hyperparameters"><span class="header-section-number">15.11.7</span> Gather Manually Chosen Hyperparameters</a></li>
  </ul></li>
  <li><a href="#finalize-fit-and-predict-with-manually-chosen-hyperparameters" id="toc-finalize-fit-and-predict-with-manually-chosen-hyperparameters" class="nav-link" data-scroll-target="#finalize-fit-and-predict-with-manually-chosen-hyperparameters"><span class="header-section-number">15.12</span> Finalize, Fit and Predict with Manually Chosen Hyperparameters</a></li>
  <li><a href="#session-info" id="toc-session-info" class="nav-link" data-scroll-target="#session-info"><span class="header-section-number">16</span> Session Info</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./apply00_intro.html">Modeling of Microbiome Data</a></li><li class="breadcrumb-item"><a href="./apply02_model_lin.html"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Linear Modelling</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Linear Modelling</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Set seed and load packages.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1337</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidymodels"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>tidymodels<span class="sc">::</span><span class="fu">tidymodels_prefer</span>()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"vegan"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Load data.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>count_matrix_clr <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_rds</span>(<span class="st">"https://github.com/WilliamH-R/BioStatistics/raw/main/data/count_matrix/count_matrix_clr.rds"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">"NA"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>meta <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"data/metadata.txt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Run, chem_administration, ETHNICITY, geo_loc_name,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>         Host_age, host_body_mass_index, Host_disease, host_phenotype, host_sex) <span class="sc">|&gt;</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Sample =</span> Run,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Treatment =</span> chem_administration,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Ethnicity =</span> ETHNICITY,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">Location =</span> geo_loc_name,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">Age =</span> Host_age,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">BMI =</span> host_body_mass_index,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">Disease_severity =</span> Host_disease,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">EDSS =</span> host_phenotype,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">Sex =</span> host_sex) <span class="sc">|&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Patient_status =</span> <span class="fu">case_when</span>(Disease_severity <span class="sc">==</span> <span class="st">"1HealthyControl"</span> <span class="sc">~</span> <span class="st">"Healthy"</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                                    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"MS"</span>),</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">EDSS =</span> <span class="fu">as.factor</span>(EDSS),</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">EDSS =</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(EDSS) <span class="sc">&amp;</span> Disease_severity <span class="sc">==</span> <span class="st">"1HealthyControl"</span> <span class="sc">~</span> <span class="st">"-1"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">is.na</span>(EDSS) <span class="sc">&amp;</span> Disease_severity <span class="sc">!=</span> <span class="st">"1HealthyControl"</span> <span class="sc">~</span> <span class="st">"Unknown"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>                          <span class="cn">TRUE</span> <span class="sc">~</span> EDSS),</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">EDSS =</span> <span class="fu">as.factor</span>(EDSS))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="data-wrangling" class="level2" data-number="15.1">
<h2 data-number="15.1" class="anchored" data-anchor-id="data-wrangling"><span class="header-section-number">15.1</span> Data wrangling</h2>
<p>The data is joined with the metadata as the <code>Patient_status</code> is used as the outcome variable. Only the columns that are needed for the model are kept. Notice <code>inner_join()</code> is used such that only rows for which both the count matrix and metadata are available are kept.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>count_matrix_clr <span class="ot">&lt;-</span> count_matrix_clr <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(meta,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="st">"Sample"</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Sample, Treatment, Ethnicity, Location,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>            Age, BMI, Disease_severity, EDSS, Sex)) <span class="sc">|&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Patient_status)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cross-validation" class="level2" data-number="15.2">
<h2 data-number="15.2" class="anchored" data-anchor-id="cross-validation"><span class="header-section-number">15.2</span> Cross-Validation</h2>
<p>The data is split into a training and testing set using cross-validation to avoid overfitting. This is especially needed, as some hyperparameters needs to be tuned.</p>
<p>The data is split:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>count_matrix_clr_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(count_matrix_clr,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">prop =</span> params<span class="sc">$</span>percentage_train,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">strata =</span> Patient_status)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>count_matrix_clr_train <span class="ot">&lt;-</span> <span class="fu">training</span>(count_matrix_clr_split)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>count_matrix_clr_test <span class="ot">&lt;-</span> <span class="fu">testing</span>(count_matrix_clr_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The CV object is created:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>count_matrix_clr_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(count_matrix_clr_train,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">v =</span> params<span class="sc">$</span>n_folds)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>count_matrix_clr_folds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#  10-fold cross-validation 
# A tibble: 10 × 2
   splits           id    
   &lt;list&gt;           &lt;chr&gt; 
 1 &lt;split [327/37]&gt; Fold01
 2 &lt;split [327/37]&gt; Fold02
 3 &lt;split [327/37]&gt; Fold03
 4 &lt;split [327/37]&gt; Fold04
 5 &lt;split [328/36]&gt; Fold05
 6 &lt;split [328/36]&gt; Fold06
 7 &lt;split [328/36]&gt; Fold07
 8 &lt;split [328/36]&gt; Fold08
 9 &lt;split [328/36]&gt; Fold09
10 &lt;split [328/36]&gt; Fold10</code></pre>
</div>
</div>
</section>
<section id="recipes" class="level2" data-number="15.3">
<h2 data-number="15.3" class="anchored" data-anchor-id="recipes"><span class="header-section-number">15.3</span> Recipes</h2>
<p>The recipes contain two pieces of important information. The first is the formula that describes the relationship between the variables and the outcome. In this case, which genera to use for predicting disease. The second is the pre-processing steps that are applied to the data before the model is built. This could include steps such as scaling, log-transform or imputing missing values. Here, the data is already clr-transformed.</p>
<p>Two recipes are created. One without any pre-processing steps, and one where Principal Component Analysis (PCA) is applied to the data. In both cases, all variables is used to try and predict the outcome <code>Patient_status</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>stand_recipe <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Patient_status <span class="sc">~</span> .,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">data =</span> count_matrix_clr_train)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>pca_recipe <span class="ot">&lt;-</span> stand_recipe <span class="sc">|&gt;</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_pca</span>(<span class="fu">all_predictors</span>(),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">num_comp =</span> <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="model-specifications" class="level2" data-number="15.4">
<h2 data-number="15.4" class="anchored" data-anchor-id="model-specifications"><span class="header-section-number">15.4</span> Model Specifications</h2>
<p>To model the data, a specification is needed. This includes the model to use, the engine to use, the mode of prediction and choosing hyperparameters. Since the outcome is binary, a logistic regression model is used. The model is later tuned using a grid search over the hyperparameters <code>penalty</code> and <code>mixture</code>. Models with exclusively Ridge and Lasso regularization are built, as well as a model with a mixture of both.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>log_spec <span class="ot">&lt;-</span> <span class="fu">logistic_reg</span>(<span class="at">penalty =</span> <span class="fu">tune</span>(),</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">mixture =</span> <span class="fu">tune</span>()) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>log_ridge_spec <span class="ot">&lt;-</span> <span class="fu">logistic_reg</span>(<span class="at">penalty =</span> <span class="fu">tune</span>(),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                               <span class="at">mixture =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>log_lasso_spec <span class="ot">&lt;-</span> <span class="fu">logistic_reg</span>(<span class="at">penalty =</span> <span class="fu">tune</span>(),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>                               <span class="at">mixture =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="change-hyperparameter-values" class="level2" data-number="15.5">
<h2 data-number="15.5" class="anchored" data-anchor-id="change-hyperparameter-values"><span class="header-section-number">15.5</span> Change Hyperparameter Values</h2>
<p>The hyperparameters <code>penalty</code> and <code>mixture</code> are extracted from the model specification. This is done to see the possible values that can be used in the grid search.</p>
<p>For the mixture, values between <span class="math inline">\(0.05\)</span> and <span class="math inline">\(1\)</span> is used which seem to be decent values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>log_spec <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_parameter_set_dials</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_parameter_dials</span>(<span class="st">"mixture"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Proportion of Lasso Penalty (quantitative)
Range: [0.05, 1]</code></pre>
</div>
</div>
<p>For the penalty, values between <span class="math inline">\(10^-10\)</span> and <span class="math inline">\(1\)</span> are used pr default. The range is increased to <span class="math inline">\(5*10^1\)</span>. The updated range is saved in a new object, but the information is not added to the models until the workflow is created further down. As seen from the output, the information do not pertain to a specific model, but simply contain ranges for different hyperparameters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>log_param_ranges <span class="ot">&lt;-</span> log_spec <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_parameter_set_dials</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update</span>(<span class="at">penalty =</span> <span class="fu">penalty</span>(<span class="fu">c</span>(params<span class="sc">$</span>penalty_lower,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                             params<span class="sc">$</span>penalty_higher)))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>log_penalty_param_ranges <span class="ot">&lt;-</span> log_lasso_spec <span class="sc">|&gt;</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_parameter_set_dials</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update</span>(<span class="at">penalty =</span> <span class="fu">penalty</span>(<span class="fu">c</span>(params<span class="sc">$</span>penalty_lower,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                             params<span class="sc">$</span>penalty_higher)))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>log_param_ranges</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Collection of 2 parameters for tuning

 identifier    type    object
    penalty penalty nparam[+]
    mixture mixture nparam[+]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>log_penalty_param_ranges</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Collection of 1 parameters for tuning

 identifier    type    object
    penalty penalty nparam[+]</code></pre>
</div>
</div>
</section>
<section id="create-the-workflow-set" class="level2" data-number="15.6">
<h2 data-number="15.6" class="anchored" data-anchor-id="create-the-workflow-set"><span class="header-section-number">15.6</span> Create the Workflow Set</h2>
<p>The recipes are combined with the model specifications to create a workflow set. The workflow set is used to fit the models to the data and evaluate the models. Notice here it is called a workflow set, as it contains multiple workflows. Each row of the workflow set is a workflow of its own which further contain the recipe and model.</p>
<p>A workflow set for all combinations of recipes and models is created:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>workflow_set <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">preproc =</span> <span class="fu">list</span>(<span class="at">stand =</span> stand_recipe,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">pca =</span> pca_recipe),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">models =</span> <span class="fu">list</span>(<span class="at">log =</span> log_spec,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">log_ridge =</span> log_ridge_spec,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">log_lasso =</span> log_lasso_spec)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>workflow_set</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A workflow set/tibble: 6 × 4
  wflow_id        info             option    result    
  &lt;chr&gt;           &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    
1 stand_log       &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
2 stand_log_ridge &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
3 stand_log_lasso &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
4 pca_log         &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
5 pca_log_ridge   &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
6 pca_log_lasso   &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</code></pre>
</div>
</div>
<p>The parameter objects which contain the hyperparameter ranges are added to the workflow:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>workflow_set <span class="ot">&lt;-</span> workflow_set <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">option_add</span>(<span class="at">id =</span> <span class="st">"stand_log"</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">param_info =</span> log_param_ranges) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">option_add</span>(<span class="at">id =</span> <span class="st">"pca_log"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">param_info =</span> log_param_ranges) <span class="sc">|&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">option_add</span>(<span class="at">id =</span> <span class="st">"stand_log_ridge"</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">param_info =</span> log_penalty_param_ranges) <span class="sc">|&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">option_add</span>(<span class="at">id =</span> <span class="st">"stand_log_lasso"</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">param_info =</span> log_penalty_param_ranges) <span class="sc">|&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">option_add</span>(<span class="at">id =</span> <span class="st">"pca_log_ridge"</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">param_info =</span> log_penalty_param_ranges) <span class="sc">|&gt;</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">option_add</span>(<span class="at">id =</span> <span class="st">"pca_log_lasso"</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">param_info =</span> log_penalty_param_ranges)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>workflow_set</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A workflow set/tibble: 6 × 4
  wflow_id        info             option    result    
  &lt;chr&gt;           &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    
1 stand_log       &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;list [0]&gt;
2 stand_log_ridge &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;list [0]&gt;
3 stand_log_lasso &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;list [0]&gt;
4 pca_log         &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;list [0]&gt;
5 pca_log_ridge   &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;list [0]&gt;
6 pca_log_lasso   &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;list [0]&gt;</code></pre>
</div>
</div>
</section>
<section id="tune-hyperparameters" class="level2" data-number="15.7">
<h2 data-number="15.7" class="anchored" data-anchor-id="tune-hyperparameters"><span class="header-section-number">15.7</span> Tune hyperparameters</h2>
<p>All workflows in the workflow set contain hyperparameters. These are tuned with a search grid using the function <code>tune_grid()</code>. As <code>workflow_set</code> contain multiple workflows, the <code>tune_grid()</code> function can be mapped over the workflows to tune all hyperparameters using <code>workflow_map()</code>, a <code>purrr</code>-like map function.</p>
<p>Several settings for tuning the grid exists. This includes e.g.&nbsp;whether or not to parallelize, what output to save and how verbose the output should be, i.e.&nbsp;how much should be printed to std.out. The settings are set to:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>grid_settings <span class="ot">&lt;-</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">control_grid</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">save_pred =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">parallel_over =</span> <span class="st">"everything"</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">save_workflow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">extract =</span> <span class="cf">function</span>(x) x</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>   )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The grid search is performed for a grid of size 10. This means that 10 different combinations of the hyperparameters are tried for each model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>grid_results <span class="ot">&lt;-</span> workflow_set <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow_map</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">fn =</span> <span class="st">"tune_grid"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">1337</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> count_matrix_clr_folds,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> params<span class="sc">$</span>grid_size,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> grid_settings</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>tidymodels</code> comes with a lot of convenience functions. One of these is <code>autoplot()</code> that can, among other things, plot the results of the grid search. The best result of each workflow is selected based on the AUC.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  grid_results,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">rank_metric =</span> <span class="st">"roc_auc"</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">"roc_auc"</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"wflow_id"</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> mean)) <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> wflow_id,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The issue with wrappers, e.g.&nbsp;the convenience function <code>autoplot()</code>, is that they do not always provide the flexibility needed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>grid_results <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.metric <span class="sc">==</span> <span class="st">"roc_auc"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(wflow_id) <span class="sc">|&gt;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean)) <span class="sc">|&gt;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> rank,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> mean,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> wflow_id)) <span class="sc">+</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean <span class="sc">-</span> std_err,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax =</span> mean <span class="sc">+</span> std_err)) <span class="sc">+</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Rank"</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"AUC"</span>) <span class="sc">+</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> wflow_id,</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The hyperparameters resulting in the best AUC is extracted for each workflow. Note that the value of mixture is an order of magnitude different for <code>stand_log</code> and <code>pca_log</code>. In the PCA space, the model emphasizes Lasso over Ridge. This is likely due to the PCA reducing the number of variables, which in turn seems to reduce the need for setting coefficients to 0 (Lasso regularization).</p>
<p>Note that the value of mixture is close to zero for both Elastic Net models, which means that the model emphasizes Ridge over Lasso. Note also that the penalty is much lower for the workflow with PCA pre-processing. This is likely due to the PCA reducing the number of variables, which in turn seems to reduce the need for regularization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>workflow_ids <span class="ot">&lt;-</span> grid_results <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(wflow_id)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>tuning_params_result <span class="ot">&lt;-</span> workflow_ids <span class="sc">|&gt;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(id) {</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    grid_results <span class="sc">|&gt;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">extract_workflow_set_result</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select_best</span>(<span class="at">metric =</span> <span class="st">"roc_auc"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">wflow_id =</span> id)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    }) <span class="sc">|&gt;</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">|&gt;</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mixture =</span> <span class="fu">case_when</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">string =</span> wflow_id,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">pattern =</span> <span class="st">"lasso"</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>                             stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">string =</span> wflow_id,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">pattern =</span> <span class="st">"ridge"</span>) <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>                             <span class="cn">TRUE</span> <span class="sc">~</span> mixture)) <span class="sc">|&gt;</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(wflow_id, penalty, mixture)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>tuning_params_result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  wflow_id         penalty mixture
  &lt;chr&gt;              &lt;dbl&gt;   &lt;dbl&gt;
1 stand_log       6.32e- 2  0.0560
2 stand_log_ridge 3.24e+ 0  0     
3 stand_log_lasso 3.85e- 2  1     
4 pca_log         2.02e- 3  0.236 
5 pca_log_ridge   1.13e-10  0     
6 pca_log_lasso   1.13e-10  1     </code></pre>
</div>
</div>
</section>
<section id="finalize-workflow" class="level2" data-number="15.8">
<h2 data-number="15.8" class="anchored" data-anchor-id="finalize-workflow"><span class="header-section-number">15.8</span> Finalize workflow</h2>
<p>As the hyperparameters have been tuned, the final workflow can be created. This is done by adding the hyperparameters to the workflow. When the hyperparameters have been added, the workflows can be fitted.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>workflow_set_final <span class="ot">&lt;-</span> workflow_ids <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(id) {</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    grid_results <span class="sc">|&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">extract_workflow</span>(id) <span class="sc">|&gt;</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">finalize_workflow</span>(tuning_params_result <span class="sc">|&gt;</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">filter</span>(wflow_id <span class="sc">==</span> id))</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(workflow_set_final) <span class="ot">&lt;-</span> workflow_ids</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To exemplify, the <code>pca_log</code> workflow is shown from before finalizing and after finalizing. As can be seen, the hyperparameters are added to the workflow such that they have a value instead of <code>tune()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>grid_results <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_workflow</span>(<span class="st">"pca_log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: logistic_reg()

── Preprocessor ────────────────────────────────────────────────────────────────
1 Recipe Step

• step_pca()

── Model ───────────────────────────────────────────────────────────────────────
Logistic Regression Model Specification (classification)

Main Arguments:
  penalty = tune()
  mixture = tune()

Computational engine: glmnet </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>workflow_set_final<span class="sc">$</span>pca_log</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: logistic_reg()

── Preprocessor ────────────────────────────────────────────────────────────────
1 Recipe Step

• step_pca()

── Model ───────────────────────────────────────────────────────────────────────
Logistic Regression Model Specification (classification)

Main Arguments:
  penalty = 0.00202417340370754
  mixture = 0.235985305487236

Computational engine: glmnet </code></pre>
</div>
</div>
</section>
<section id="fit-and-predict-for-the-final-workflow" class="level2" data-number="15.9">
<h2 data-number="15.9" class="anchored" data-anchor-id="fit-and-predict-for-the-final-workflow"><span class="header-section-number">15.9</span> Fit and Predict for the Final Workflow</h2>
<p>With the hyperparameters set, the workflows can be fit to the data, and the models can be evaluated. The <code>last_fit()</code> function is used to fit the model to the data. The <code>split</code> argument is set to the cross-validation object created earlier. This is done to avoid overfitting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>workflow_set_fit <span class="ot">&lt;-</span> workflow_ids <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(id) {</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    workflow_set_final[[id]] <span class="sc">|&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">last_fit</span>(<span class="at">split =</span> count_matrix_clr_split)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(workflow_set_fit) <span class="ot">&lt;-</span> workflow_ids</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="predict-and-visualize-performance" class="level2" data-number="15.10">
<h2 data-number="15.10" class="anchored" data-anchor-id="predict-and-visualize-performance"><span class="header-section-number">15.10</span> Predict and visualize performance</h2>
<p>For each of the fitted models, the predictions are collected and the performance is evaluated. One option is to look at the confusion matrices, e.g.:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>workflow_set_fit<span class="sc">$</span>stand_log <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_predictions</span>()<span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(<span class="at">truth =</span> Patient_status,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">estimate =</span> .pred_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Truth
Prediction Healthy MS
   Healthy       0  1
   MS           10 81</code></pre>
</div>
</div>
<p>Another more visual approach is to plot the ROC-curve. This is done for all models in the workflow set. First, the specificity and sensitivity is calculated for each model with a convenience function <code>roc_curve()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>roc_auc_results <span class="ot">&lt;-</span> workflow_ids <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(id) {</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    workflow_set_fit[[id]] <span class="sc">|&gt;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">collect_predictions</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">roc_curve</span>(<span class="at">truth =</span> Patient_status,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                .pred_MS,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">event_level =</span> <span class="st">"second"</span>) <span class="sc">|&gt;</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">wflow_id =</span> id)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>()</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>roc_auc_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 564 × 4
   .threshold specificity sensitivity wflow_id 
        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;    
 1   -Inf             0         1     stand_log
 2      0.498         0         1     stand_log
 3      0.505         0         0.988 stand_log
 4      0.570         0.1       0.988 stand_log
 5      0.653         0.1       0.976 stand_log
 6      0.714         0.1       0.963 stand_log
 7      0.762         0.2       0.963 stand_log
 8      0.781         0.2       0.951 stand_log
 9      0.782         0.3       0.951 stand_log
10      0.789         0.3       0.939 stand_log
# ℹ 554 more rows</code></pre>
</div>
</div>
<p>Finally, the ROC-curve is plotted stratified by the workflow ID. The ROC-curve is a plot of the sensitivity against (1 - specificity). Sensitivity is the proportion of true positives out of all positives, i.e.&nbsp;true positive rate. In this case, the proportion of correctly classified MS patients out of all MS patients. Specificity is the proportion of true negatives out of all negatives. In this case, the proportion of correctly classified healthy patients out of all healthy patients. Since the x-axis plots (1 - specificity), it is actually the proportion of false positives out of all negatives, i.e.&nbsp;the false positive rate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>roc_auc_results <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span> <span class="sc">-</span> specificity,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> sensitivity,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> wflow_id)) <span class="sc">+</span> </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">lwd =</span> <span class="dv">1</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">lty =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span> </span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="fine-tuning-hyperparameters" class="level2" data-number="15.11">
<h2 data-number="15.11" class="anchored" data-anchor-id="fine-tuning-hyperparameters"><span class="header-section-number">15.11</span> Fine Tuning Hyperparameters</h2>
<p>The hyperparameters are tuned using a grid search. The grid search is performed for a grid of size 200. The best result of each workflow is selected based on the AUC and is chosen strictly on the best numerical value. It is very possible, that a model with a slightly lower AUC is preferable due to simplicity. To investigate this, plots of the hyperparameters plotted against the AUC is created.</p>
<p>It can be easily illustrated with the <code>autoplot()</code> function. The plot is not very informative with multiple hyperparameters, as it is not shown how they affect the AUC in combination.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(grid_results,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">id =</span> <span class="st">"stand_log"</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">metric =</span> <span class="st">"roc_auc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>For the two ENet models, the hyperparameters are extracted manually and plotted against the AUC. For the Ridge and Lasso models, the hyperparameters performance is plotted using the <code>autoplot</code> function.</p>
<section id="standard-preprocessing-lasso" class="level3" data-number="15.11.1">
<h3 data-number="15.11.1" class="anchored" data-anchor-id="standard-preprocessing-lasso"><span class="header-section-number">15.11.1</span> Standard Preprocessing, Lasso</h3>
<p>By inspecting the plot, it would seem the optimal <code>penalty</code> is indeed at the optimum <code>roc_auc</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(grid_results,</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">id =</span> <span class="st">"stand_log_lasso"</span>,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">metric =</span> <span class="st">"roc_auc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The manually chosen hyperparameter is collected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>stand_log_lasso_penalty <span class="ot">&lt;-</span> grid_results <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_workflow_set_result</span>(<span class="st">"stand_log_lasso"</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"roc_auc"</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(penalty)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>stand_log_lasso_mixture <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="standard-preprocessing-ridge" class="level3" data-number="15.11.2">
<h3 data-number="15.11.2" class="anchored" data-anchor-id="standard-preprocessing-ridge"><span class="header-section-number">15.11.2</span> Standard Preprocessing, Ridge</h3>
<p>By inspecting the plot, it would seem the optimal <code>penalty</code> is indeed at the optimum <code>roc_auc</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(grid_results,</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">id =</span> <span class="st">"stand_log_ridge"</span>,</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">metric =</span> <span class="st">"roc_auc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The manually chosen hyperparameter is collected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>stand_log_ridge_penalty <span class="ot">&lt;-</span> grid_results <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_workflow_set_result</span>(<span class="st">"stand_log_ridge"</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"roc_auc"</span>,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(penalty)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>stand_log_ridge_mixture <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="standard-preprocessing-elastic-net" class="level3" data-number="15.11.3">
<h3 data-number="15.11.3" class="anchored" data-anchor-id="standard-preprocessing-elastic-net"><span class="header-section-number">15.11.3</span> Standard Preprocessing, Elastic Net</h3>
<p>For the ENet models, two parameters are tuned: <code>penalty</code> and <code>mixture</code>. Instead of plotting against AUC, the hyperparameters are plotted against each other, and the color represents the AUC. The best AUC are the more purple colors. The plot shows that the best AUC is achieved with a penalty close to zero.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>stand_log_plot <span class="ot">&lt;-</span> grid_results <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_workflow_set_result</span>(<span class="st">"stand_log"</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"roc_auc"</span>,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> params<span class="sc">$</span>grid_size) <span class="sc">|&gt;</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> penalty,</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> mixture,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> mean)) <span class="sc">+</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(<span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Standard Preprocessing, Elastic Net"</span>,</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Penalty"</span>,</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mixture"</span>,</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"AUC"</span>)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>stand_log_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>To better see the effect of the hyperparameters on the AUC, the x-axis is limited as the higher values are observed close to <span class="math inline">\(penalty = 0\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> stand_log_plot <span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-8ef2f1585367527d486f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-8ef2f1585367527d486f">{"x":{"data":[{"x":[0.063197470366247482,0.33799350350986723,0.025315441368361707,0.008701456860565537,0.19883093568835414,0.11295022747094154,0.021769798216572343,0.045413787756120629,0.013144012025709055,0.017501482505939664,0.018258850223910588,0.015659634545226179,0.011621852549906091,0.037997192355372737,0.03936262057312994,0.049953994537004782,0.09223827385783552,0.032891405466261722,0.0068273033629787094,0.0078699558410682251,0.0062138552205980302,0.028193753169788099,0.0095275563237128373,0.0027904186395037952,0.0038395173977909787,0.0048873051512107737,0.0024136915902237422,0.0055551098519693327,0.0020241734037075351,0.0012545733898655005,0.0041907178183549472,0.0034005037444877545,6.4048940927577091e-07,0.0014667132732052569,0.0010177641222362446,0.0001504869481831588,2.1418398646833643e-06,2.6596411351083454e-06,3.8692149924543076e-10,4.8641964803618032e-06,0.00065853956099673385,0.0016239464398585732,0.00025340678117206325,6.7336808639254848e-09,6.8967686642187936e-10,9.1781175624084277e-06,8.2209753667927531e-05,6.0049915243812176e-05,3.0072061286511474e-10,1.1689684208040374e-10,2.2860955245336137e-09,0.0004712620270909603,8.902268059568852e-05,5.374097879302093e-06,3.1988483554901233e-09,8.1910737275208737e-09,1.304407161569941e-09,4.4709986778166699e-09,0.00017799749515749977,5.7362824475114669e-08,7.0844524207551518e-08,4.5158537513774745e-05,1.5280103099444241e-05,0.0022113539217984385,2.4450809376033931e-09,1.5641000230363031e-07,1.3793388810851333e-10,2.3843856097403737e-05,1.9118502239269855e-06,5.1388156769812524e-09,9.15214183063898e-08,2.824064109574955e-05,1.2518892282953761e-08,2.0777195920762428e-08,1.5091556784238956e-10,0.00014312336066914561,0.00067605827543678644,3.9770504150623362e-07,0.00010636162899647054,7.4025974499076115e-06,2.9400381610595088e-06,4.503904845957491e-06,1.7845104259886204e-08,4.7512036326715502e-05,7.1220729007447195e-05,0.00058064865512536315,0.00011495458649789507,0.00075336537973464323,2.86516837104417e-08,0.058565798280372186,1.1312953821157616e-07,9.2256086086557139e-07,4.5120396863713756e-08,3.0791977304788148e-08,4.7142267910785397e-07,3.9407653496131222e-08,1.6555968089685171e-06,0.0011282993132160197,8.9589100796870813e-10,4.2193131340070726e-10,1.0211513325361671e-09,1.6920529708184228e-09,2.2765434224695857e-07,5.393986732290897e-08,1.9742229376594024e-09,0.00088539164758970367,0.00030070759643262713,0.00042254165956115024,7.6359381619774942e-08,1.3507247794812083e-06,7.9167624692181612e-06,1.2400564830934803e-06,1.164158568224593e-06,2.0620323063430488e-05,2.9054425874004855e-07,8.5843485488932744e-07,1.6601986510421055e-10,5.9797077966085735e-09,5.7852312950333695e-10,0.0003390543069611036,6.4826738086470823e-10,2.929702895942869e-09,5.6067235110300393e-07,3.7481591503023249e-06,1.5255420233482344e-07,1.7946981190453831e-05,0.00037328226464055329,6.7008849633480376e-06,1.1509096153849011e-09,1.5199858554967866e-09,1.2399450334308629e-05,1.4774198763474688e-05,1.9906074336133899e-10,2.2650531070006931e-10,3.4790412249854677e-10,7.9744978076917729e-10,7.2617505181028278e-07,5.3426512710362859e-07,2.5615150166180124e-05,4.7793419494262385e-10,9.3410959043493999e-09,3.2247469841970835e-05,1.1064309998619954e-08,1.4565280631680425e-08,3.7542011659839961e-07,2.4558646534143199e-06,1.0243871692675817e-07,2.0224484129505321e-08,3.0430713073296685e-07,2.0237223910153482e-07,0.00019087761001733138,2.3791391189442098e-08,9.9413224761635264e-09,4.0167512888695141e-05,3.5769662945243744e-08,2.7234606237630649e-10,1.9820895521985441e-07,1.2935463463527e-07,0.000212269938645908,1.0598000662130934e-05,5.471363523154967e-05,3.6858412811653098e-09,4.0060643417726394e-09,3.4630802916416437e-06,1.0078100629107036e-10,null,null,0.77674606659077416,null,null,0.49180951788087046,null,0.91749340572814431,null,0.38796000553716631,null,0.19524051060035696,0.54340385778768563,null,0.23475199522567952,0.15570289931808953,null,0.89156071549174598,0.29226820788289387,0.68131851268654486,null,null,null,null,null,null,null,0.079380772088935111,null,0.47029145686855439,0.14979095588868929,0.12261848832366704,0.27875996247323298,null,0.10208343856354854],"y":[0.056038534795516175,0.12525226385833232,0.13906285749358357,0.07957854776346357,0.15805603871878704,0.30799186894349984,0.64775210442853859,0.33804601655347505,0.18335380978288596,0.21633938331069658,0.75056986238306855,0.3790143410077435,0.73247358440619426,0.97309848298109136,0.53463373226503608,0.92234064533305349,0.50865893462853273,0.85453800066071561,0.67158592646324544,0.31489755056548163,0.78520723771949996,0.74598031237948459,0.68052457147988032,0.12066577821091051,0.32209742049511986,0.39554566772759425,0.15387685828801478,0.49974209013569632,0.23598530548723645,0.22684270820964592,0.75333060940075669,0.88631112079531893,0.051040618856262883,0.42577550837589656,0.44390796919976128,0.076174985230027234,0.062556108826480342,0.069905737970548221,0.097462790062476407,0.1000427515861229,0.36313635426468682,0.58548525788349803,0.088540154388581871,0.083688179022865378,0.10346527504076949,0.10909149694128428,0.20797405881650044,0.1607231424318743,0.11377612772985594,0.12907343453197972,0.13422120394319065,0.2984957143891952,0.24052104553941173,0.14377521601720947,0.1458525755900773,0.1726829049582593,0.17795209780440202,0.18207177519233664,0.29554767700540829,0.19150148961937519,0.19617180772061693,0.31960334393638185,0.19850273423740872,0.90650251309992746,0.21470456672343424,0.22567927496298218,0.24871753874490971,0.2787270430398639,0.20477561482001327,0.23248309698188674,0.25763025040877979,0.37156672072876246,0.28993369098351102,0.26348808208218544,0.2699385273268563,0.40388389917893797,0.51597155658033445,0.3289308802767773,0.49043737128359499,0.33330943465692686,0.34519230217445868,0.35225866774236786,0.35668076702568213,0.59004212742921658,0.5989219843758038,0.70372248185845099,0.58042881763115295,0.72537688501441155,0.47413100088521604,0.8361947625867906,0.47183656691003117,0.48286375719989877,0.49560583936062169,0.43932475971145318,0.44833816268737425,0.45478698233695464,0.43248999386781356,0.8499761940545868,0.50434945042809698,0.38647445263655389,0.38770558195764893,0.40090494918351754,0.40830939423933155,0.41229315490520091,0.42015431628149236,0.77897512445447503,0.74152755723643349,0.7874413635787787,0.52583526466001063,0.53104090002598237,0.55256359681230971,0.55919703244039554,0.54131859883398281,0.67566116795846021,0.66436035596026344,0.63905726913234684,0.65115045508294134,0.66144440620328526,0.56592241612111682,0.8290348858803045,0.62906277330685401,0.63032791376725072,0.60151046838227196,0.57694662442675326,0.59353947465022794,0.62351310539356208,0.88339222330081979,0.68889945177832845,0.71792305309709625,0.72134103478613543,0.60594162963639253,0.6386184358752216,0.73724597197584807,0.69720177493256053,0.71376368645293409,0.69595693580049556,0.75847308039711792,0.7061784658510587,0.79550278716784673,0.79642607165145451,0.76839513922389602,0.83923606664431283,0.8598730433743913,0.81955345866107387,0.84651031903485996,0.86453907268954211,0.8152866423213273,0.80866921017889404,0.8140070061805309,0.87486631464905806,0.96243729354202512,0.93190861521527413,0.89081674904993269,0.92828321175923334,0.89637938308221055,0.90093367017980197,0.937390118732641,0.91225817372713935,0.98678583774523576,0.95246320569230014,0.93898273172962943,0.94762538214528469,0.96706518703530309,0.993071345815144,0.98204523121216336,0.068928002201020716,0.16812513319432038,0.25150362808920906,0.26545811888552268,0.27636304227448999,0.28612390204792609,0.30605163801548763,0.3400292806780198,0.36551270857686174,0.37641343595640497,0.42342623713426286,0.45016588754998521,0.45865129066258664,0.46428629395773163,0.47752235892234601,0.51515726201725198,0.5227314853055286,0.54870951367221998,0.55662500317965169,0.57242079207854113,0.61249095533665976,0.61951436671236293,0.68477991498482882,0.76329173376696424,0.77619330096116756,0.80411075827170864,0.82683240781660428,0.86814090792817289,0.8791649226999726,0.91760180883045539,0.95636768513685089,0.95984679849632082,0.98050118890212623,0.99748846744874031,0.65332221266540003],"text":["penalty: 6.319747e-02<br />mixture: 0.05603853<br />mean: 0.6652597","penalty: 3.379935e-01<br />mixture: 0.12525226<br />mean: 0.6469514","penalty: 2.531544e-02<br />mixture: 0.13906286<br />mean: 0.6466769","penalty: 8.701457e-03<br />mixture: 0.07957855<br />mean: 0.6450253","penalty: 1.988309e-01<br />mixture: 0.15805604<br />mean: 0.6421241","penalty: 1.129502e-01<br />mixture: 0.30799187<br />mean: 0.6411103","penalty: 2.176980e-02<br />mixture: 0.64775210<br />mean: 0.6407129","penalty: 4.541379e-02<br />mixture: 0.33804602<br />mean: 0.6398095","penalty: 1.314401e-02<br />mixture: 0.18335381<br />mean: 0.6397661","penalty: 1.750148e-02<br />mixture: 0.21633938<br />mean: 0.6392091","penalty: 1.825885e-02<br />mixture: 0.75056986<br />mean: 0.6387774","penalty: 1.565963e-02<br />mixture: 0.37901434<br />mean: 0.6358448","penalty: 1.162185e-02<br />mixture: 0.73247358<br />mean: 0.6353542","penalty: 3.799719e-02<br />mixture: 0.97309848<br />mean: 0.6342283","penalty: 3.936262e-02<br />mixture: 0.53463373<br />mean: 0.6336708","penalty: 4.995399e-02<br />mixture: 0.92234065<br />mean: 0.6335903","penalty: 9.223827e-02<br />mixture: 0.50865893<br />mean: 0.6325802","penalty: 3.289141e-02<br />mixture: 0.85453800<br />mean: 0.6312815","penalty: 6.827303e-03<br />mixture: 0.67158593<br />mean: 0.6311665","penalty: 7.869956e-03<br />mixture: 0.31489755<br />mean: 0.6269053","penalty: 6.213855e-03<br />mixture: 0.78520724<br />mean: 0.6261530","penalty: 2.819375e-02<br />mixture: 0.74598031<br />mean: 0.6246690","penalty: 9.527556e-03<br />mixture: 0.68052457<br />mean: 0.6238406","penalty: 2.790419e-03<br />mixture: 0.12066578<br />mean: 0.6231174","penalty: 3.839517e-03<br />mixture: 0.32209742<br />mean: 0.6216787","penalty: 4.887305e-03<br />mixture: 0.39554567<br />mean: 0.6211669","penalty: 2.413692e-03<br />mixture: 0.15387686<br />mean: 0.6196207","penalty: 5.555110e-03<br />mixture: 0.49974209<br />mean: 0.6195619","penalty: 2.024173e-03<br />mixture: 0.23598531<br />mean: 0.6176132","penalty: 1.254573e-03<br />mixture: 0.22684271<br />mean: 0.6141191","penalty: 4.190718e-03<br />mixture: 0.75333061<br />mean: 0.6103212","penalty: 3.400504e-03<br />mixture: 0.88631112<br />mean: 0.6059747","penalty: 6.404894e-07<br />mixture: 0.05104062<br />mean: 0.6034749","penalty: 1.466713e-03<br />mixture: 0.42577551<br />mean: 0.6030607","penalty: 1.017764e-03<br />mixture: 0.44390797<br />mean: 0.6015700","penalty: 1.504869e-04<br />mixture: 0.07617499<br />mean: 0.6014345","penalty: 2.141840e-06<br />mixture: 0.06255611<br />mean: 0.6004112","penalty: 2.659641e-06<br />mixture: 0.06990574<br />mean: 0.6004112","penalty: 3.869215e-10<br />mixture: 0.09746279<br />mean: 0.5989205","penalty: 4.864196e-06<br />mixture: 0.10004275<br />mean: 0.5989205","penalty: 6.585396e-04<br />mixture: 0.36313635<br />mean: 0.5986952","penalty: 1.623946e-03<br />mixture: 0.58548526<br />mean: 0.5984247","penalty: 2.534068e-04<br />mixture: 0.08854015<br />mean: 0.5983415","penalty: 6.733681e-09<br />mixture: 0.08368818<br />mean: 0.5982955","penalty: 6.896769e-10<br />mixture: 0.10346528<br />mean: 0.5982753","penalty: 9.178118e-06<br />mixture: 0.10909150<br />mean: 0.5982753","penalty: 8.220975e-05<br />mixture: 0.20797406<br />mean: 0.5976083","penalty: 6.004992e-05<br />mixture: 0.16072314<br />mean: 0.5969373","penalty: 3.007206e-10<br />mixture: 0.11377613<br />mean: 0.5968047","penalty: 1.168968e-10<br />mixture: 0.12907343<br />mean: 0.5968047","penalty: 2.286096e-09<br />mixture: 0.13422120<br />mean: 0.5968047","penalty: 4.712620e-04<br />mixture: 0.29849571<br />mean: 0.5967874","penalty: 8.902268e-05<br />mixture: 0.24052105<br />mean: 0.5964656","penalty: 5.374098e-06<br />mixture: 0.14377522<br />mean: 0.5961596","penalty: 3.198848e-09<br />mixture: 0.14585258<br />mean: 0.5961596","penalty: 8.191074e-09<br />mixture: 0.17268290<br />mean: 0.5948216","penalty: 1.304407e-09<br />mixture: 0.17795210<br />mean: 0.5948216","penalty: 4.470999e-09<br />mixture: 0.18207178<br />mean: 0.5948216","penalty: 1.779975e-04<br />mixture: 0.29554768<br />mean: 0.5945133","penalty: 5.736282e-08<br />mixture: 0.19150149<br />mean: 0.5941966","penalty: 7.084452e-08<br />mixture: 0.19617181<br />mean: 0.5941966","penalty: 4.515854e-05<br />mixture: 0.31960334<br />mean: 0.5929195","penalty: 1.528010e-05<br />mixture: 0.19850273<br />mean: 0.5927260","penalty: 2.211354e-03<br />mixture: 0.90650251<br />mean: 0.5926652","penalty: 2.445081e-09<br />mixture: 0.21470457<br />mean: 0.5925859","penalty: 1.564100e-07<br />mixture: 0.22567927<br />mean: 0.5925859","penalty: 1.379339e-10<br />mixture: 0.24871754<br />mean: 0.5923333","penalty: 2.384386e-05<br />mixture: 0.27872704<br />mean: 0.5923333","penalty: 1.911850e-06<br />mixture: 0.20477561<br />mean: 0.5920808","penalty: 5.138816e-09<br />mixture: 0.23248310<br />mean: 0.5918283","penalty: 9.152142e-08<br />mixture: 0.25763025<br />mean: 0.5910707","penalty: 2.824064e-05<br />mixture: 0.37156672<br />mean: 0.5905512","penalty: 1.251889e-08<br />mixture: 0.28993369<br />mean: 0.5904679","penalty: 2.077720e-08<br />mixture: 0.26348808<br />mean: 0.5904256","penalty: 1.509156e-10<br />mixture: 0.26993853<br />mean: 0.5895702","penalty: 1.431234e-04<br />mixture: 0.40388390<br />mean: 0.5890945","penalty: 6.760583e-04<br />mixture: 0.51597156<br />mean: 0.5878050","penalty: 3.977050e-07<br />mixture: 0.32893088<br />mean: 0.5860147","penalty: 1.063616e-04<br />mixture: 0.49043737<br />mean: 0.5857305","penalty: 7.402597e-06<br />mixture: 0.33330943<br />mean: 0.5852571","penalty: 2.940038e-06<br />mixture: 0.34519230<br />mean: 0.5852571","penalty: 4.503905e-06<br />mixture: 0.35225867<br />mean: 0.5852571","penalty: 1.784510e-08<br />mixture: 0.35668077<br />mean: 0.5852571","penalty: 4.751204e-05<br />mixture: 0.59004213<br />mean: 0.5837767","penalty: 7.122073e-05<br />mixture: 0.59892198<br />mean: 0.5835242","penalty: 5.806487e-04<br />mixture: 0.70372248<br />mean: 0.5831119","penalty: 1.149546e-04<br />mixture: 0.58042882<br />mean: 0.5829326","penalty: 7.533654e-04<br />mixture: 0.72537689<br />mean: 0.5827469","penalty: 2.865168e-08<br />mixture: 0.47413100<br />mean: 0.5823170","penalty: 5.856580e-02<br />mixture: 0.83619476<br />mean: 0.5821572","penalty: 1.131295e-07<br />mixture: 0.47183657<br />mean: 0.5819944","penalty: 9.225609e-07<br />mixture: 0.48286376<br />mean: 0.5816920","penalty: 4.512040e-08<br />mixture: 0.49560584<br />mean: 0.5816920","penalty: 3.079198e-08<br />mixture: 0.43932476<br />mean: 0.5815817","penalty: 4.714227e-07<br />mixture: 0.44833816<br />mean: 0.5815817","penalty: 3.940765e-08<br />mixture: 0.45478698<br />mean: 0.5815817","penalty: 1.655597e-06<br />mixture: 0.43248999<br />mean: 0.5801111","penalty: 1.128299e-03<br />mixture: 0.84997619<br />mean: 0.5800842","penalty: 8.958910e-10<br />mixture: 0.50434945<br />mean: 0.5795045","penalty: 4.219313e-10<br />mixture: 0.38647445<br />mean: 0.5786405","penalty: 1.021151e-09<br />mixture: 0.38770558<br />mean: 0.5786405","penalty: 1.692053e-09<br />mixture: 0.40090495<br />mean: 0.5786405","penalty: 2.276543e-07<br />mixture: 0.40830939<br />mean: 0.5786405","penalty: 5.393987e-08<br />mixture: 0.41229315<br />mean: 0.5786405","penalty: 1.974223e-09<br />mixture: 0.42015432<br />mean: 0.5786405","penalty: 8.853916e-04<br />mixture: 0.77897512<br />mean: 0.5782970","penalty: 3.007076e-04<br />mixture: 0.74152756<br />mean: 0.5774316","penalty: 4.225417e-04<br />mixture: 0.78744136<br />mean: 0.5774072","penalty: 7.635938e-08<br />mixture: 0.52583526<br />mean: 0.5770493","penalty: 1.350725e-06<br />mixture: 0.53104090<br />mean: 0.5770493","penalty: 7.916762e-06<br />mixture: 0.55256360<br />mean: 0.5766786","penalty: 1.240056e-06<br />mixture: 0.55919703<br />mean: 0.5764038","penalty: 1.164159e-06<br />mixture: 0.54131860<br />mean: 0.5756207","penalty: 2.062032e-05<br />mixture: 0.67566117<br />mean: 0.5753494","penalty: 2.905443e-07<br />mixture: 0.66436036<br />mean: 0.5749026","penalty: 8.584349e-07<br />mixture: 0.63905727<br />mean: 0.5745377","penalty: 1.660199e-10<br />mixture: 0.65115046<br />mean: 0.5743975","penalty: 5.979708e-09<br />mixture: 0.66144441<br />mean: 0.5743975","penalty: 5.785231e-10<br />mixture: 0.56592242<br />mean: 0.5741235","penalty: 3.390543e-04<br />mixture: 0.82903489<br />mean: 0.5740690","penalty: 6.482674e-10<br />mixture: 0.62906277<br />mean: 0.5738925","penalty: 2.929703e-09<br />mixture: 0.63032791<br />mean: 0.5738925","penalty: 5.606724e-07<br />mixture: 0.60151047<br />mean: 0.5732675","penalty: 3.748159e-06<br />mixture: 0.57694662<br />mean: 0.5729475","penalty: 1.525542e-07<br />mixture: 0.59353947<br />mean: 0.5726425","penalty: 1.794698e-05<br />mixture: 0.62351311<br />mean: 0.5725116","penalty: 3.732823e-04<br />mixture: 0.88339222<br />mean: 0.5720690","penalty: 6.700885e-06<br />mixture: 0.68889945<br />mean: 0.5717301","penalty: 1.150910e-09<br />mixture: 0.71792305<br />mean: 0.5716101","penalty: 1.519986e-09<br />mixture: 0.72134103<br />mean: 0.5716101","penalty: 1.239945e-05<br />mixture: 0.60594163<br />mean: 0.5709592","penalty: 1.477420e-05<br />mixture: 0.63861844<br />mean: 0.5709592","penalty: 1.990607e-10<br />mixture: 0.73724597<br />mean: 0.5709125","penalty: 2.265053e-10<br />mixture: 0.69720177<br />mean: 0.5708525","penalty: 3.479041e-10<br />mixture: 0.71376369<br />mean: 0.5708525","penalty: 7.974498e-10<br />mixture: 0.69595694<br />mean: 0.5703475","penalty: 7.261751e-07<br />mixture: 0.75847308<br />mean: 0.5701549","penalty: 5.342651e-07<br />mixture: 0.70617847<br />mean: 0.5700950","penalty: 2.561515e-05<br />mixture: 0.79550279<br />mean: 0.5695691","penalty: 4.779342e-10<br />mixture: 0.79642607<br />mean: 0.5692551","penalty: 9.341096e-09<br />mixture: 0.76839514<br />mean: 0.5691448","penalty: 3.224747e-05<br />mixture: 0.83923607<br />mean: 0.5683765","penalty: 1.106431e-08<br />mixture: 0.85987304<br />mean: 0.5664880","penalty: 1.456528e-08<br />mixture: 0.81955346<br />mean: 0.5662625","penalty: 3.754201e-07<br />mixture: 0.84651032<br />mean: 0.5661755","penalty: 2.455865e-06<br />mixture: 0.86453907<br />mean: 0.5661092","penalty: 1.024387e-07<br />mixture: 0.81528664<br />mean: 0.5659500","penalty: 2.022448e-08<br />mixture: 0.80866921<br />mean: 0.5652147","penalty: 3.043071e-07<br />mixture: 0.81400701<br />mean: 0.5652147","penalty: 2.023722e-07<br />mixture: 0.87486631<br />mean: 0.5652094","penalty: 1.908776e-04<br />mixture: 0.96243729<br />mean: 0.5644862","penalty: 2.379139e-08<br />mixture: 0.93190862<br />mean: 0.5634166","penalty: 9.941322e-09<br />mixture: 0.89081675<br />mean: 0.5630693","penalty: 4.016751e-05<br />mixture: 0.92828321<br />mean: 0.5613787","penalty: 3.576966e-08<br />mixture: 0.89637938<br />mean: 0.5613016","penalty: 2.723461e-10<br />mixture: 0.90093367<br />mean: 0.5613016","penalty: 1.982090e-07<br />mixture: 0.93739012<br />mean: 0.5600075","penalty: 1.293546e-07<br />mixture: 0.91225817<br />mean: 0.5597509","penalty: 2.122699e-04<br />mixture: 0.98678584<br />mean: 0.5596750","penalty: 1.059800e-05<br />mixture: 0.95246321<br />mean: 0.5594413","penalty: 5.471364e-05<br />mixture: 0.93898273<br />mean: 0.5577945","penalty: 3.685841e-09<br />mixture: 0.94762538<br />mean: 0.5471806","penalty: 4.006064e-09<br />mixture: 0.96706519<br />mean: 0.5441042","penalty: 3.463080e-06<br />mixture: 0.99307135<br />mean: 0.5350154","penalty: 1.007810e-10<br />mixture: 0.98204523<br />mean: 0.5342654","penalty: 2.863137e+00<br />mixture: 0.06892800<br />mean: 0.5000000","penalty: 4.562072e+00<br />mixture: 0.16812513<br />mean: 0.5000000","penalty: 7.767461e-01<br />mixture: 0.25150363<br />mean: 0.5000000","penalty: 2.300435e+00<br />mixture: 0.26545812<br />mean: 0.5000000","penalty: 5.511241e+00<br />mixture: 0.27636304<br />mean: 0.5000000","penalty: 4.918095e-01<br />mixture: 0.28612390<br />mean: 0.5000000","penalty: 7.346256e+00<br />mixture: 0.30605164<br />mean: 0.5000000","penalty: 9.174934e-01<br />mixture: 0.34002928<br />mean: 0.5000000","penalty: 4.016610e+00<br />mixture: 0.36551271<br />mean: 0.5000000","penalty: 3.879600e-01<br />mixture: 0.37641344<br />mean: 0.5000000","penalty: 1.811847e+00<br />mixture: 0.42342624<br />mean: 0.5000000","penalty: 1.952405e-01<br />mixture: 0.45016589<br />mean: 0.5000000","penalty: 5.434039e-01<br />mixture: 0.45865129<br />mean: 0.5000000","penalty: 2.118403e+00<br />mixture: 0.46428629<br />mean: 0.5000000","penalty: 2.347520e-01<br />mixture: 0.47752236<br />mean: 0.5000000","penalty: 1.557029e-01<br />mixture: 0.51515726<br />mean: 0.5000000","penalty: 8.328369e+00<br />mixture: 0.52273149<br />mean: 0.5000000","penalty: 8.915607e-01<br />mixture: 0.54870951<br />mean: 0.5000000","penalty: 2.922682e-01<br />mixture: 0.55662500<br />mean: 0.5000000","penalty: 6.813185e-01<br />mixture: 0.57242079<br />mean: 0.5000000","penalty: 8.991341e+00<br />mixture: 0.61249096<br />mean: 0.5000000","penalty: 6.692126e+00<br />mixture: 0.61951437<br />mean: 0.5000000","penalty: 3.627315e+00<br />mixture: 0.68477991<br />mean: 0.5000000","penalty: 4.791377e+00<br />mixture: 0.76329173<br />mean: 0.5000000","penalty: 2.536015e+00<br />mixture: 0.77619330<br />mean: 0.5000000","penalty: 1.251436e+00<br />mixture: 0.80411076<br />mean: 0.5000000","penalty: 1.616939e+00<br />mixture: 0.82683241<br />mean: 0.5000000","penalty: 7.938077e-02<br />mixture: 0.86814091<br />mean: 0.5000000","penalty: 1.118257e+00<br />mixture: 0.87916492<br />mean: 0.5000000","penalty: 4.702915e-01<br />mixture: 0.91760181<br />mean: 0.5000000","penalty: 1.497910e-01<br />mixture: 0.95636769<br />mean: 0.5000000","penalty: 1.226185e-01<br />mixture: 0.95984680<br />mean: 0.5000000","penalty: 2.787600e-01<br />mixture: 0.98050119<br />mean: 0.5000000","penalty: 1.425388e+00<br />mixture: 0.99748847<br />mean: 0.5000000","penalty: 1.020834e-01<br />mixture: 0.65332221<br />mean: 0.4705882"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":["rgba(68,1,84,1)","rgba(70,38,107,1)","rgba(70,39,108,1)","rgba(70,41,110,1)","rgba(69,46,114,1)","rgba(69,47,115,1)","rgba(69,48,116,1)","rgba(69,49,117,1)","rgba(69,49,117,1)","rgba(69,50,118,1)","rgba(69,50,118,1)","rgba(68,55,122,1)","rgba(68,55,123,1)","rgba(68,57,124,1)","rgba(68,58,125,1)","rgba(68,58,125,1)","rgba(67,59,127,1)","rgba(67,61,128,1)","rgba(67,61,128,1)","rgba(65,67,134,1)","rgba(65,68,135,1)","rgba(65,70,135,1)","rgba(65,71,135,1)","rgba(64,72,136,1)","rgba(64,74,136,1)","rgba(64,75,136,1)","rgba(64,77,136,1)","rgba(64,77,136,1)","rgba(63,80,137,1)","rgba(62,85,137,1)","rgba(60,90,138,1)","rgba(58,96,139,1)","rgba(57,99,139,1)","rgba(57,99,139,1)","rgba(56,101,140,1)","rgba(56,102,140,1)","rgba(55,103,140,1)","rgba(55,103,140,1)","rgba(54,105,140,1)","rgba(54,105,140,1)","rgba(54,105,140,1)","rgba(53,105,140,1)","rgba(53,106,140,1)","rgba(53,106,140,1)","rgba(53,106,140,1)","rgba(53,106,140,1)","rgba(53,107,140,1)","rgba(52,107,140,1)","rgba(52,108,140,1)","rgba(52,108,140,1)","rgba(52,108,140,1)","rgba(52,108,140,1)","rgba(52,108,141,1)","rgba(52,108,141,1)","rgba(52,108,141,1)","rgba(50,110,141,1)","rgba(50,110,141,1)","rgba(50,110,141,1)","rgba(50,111,141,1)","rgba(50,111,141,1)","rgba(50,111,141,1)","rgba(49,113,141,1)","rgba(48,113,141,1)","rgba(48,113,141,1)","rgba(48,113,141,1)","rgba(48,113,141,1)","rgba(48,114,141,1)","rgba(48,114,141,1)","rgba(48,114,141,1)","rgba(47,114,141,1)","rgba(47,115,141,1)","rgba(46,116,141,1)","rgba(46,116,142,1)","rgba(46,116,142,1)","rgba(45,117,142,1)","rgba(44,118,142,1)","rgba(43,119,142,1)","rgba(42,122,142,1)","rgba(42,122,142,1)","rgba(43,123,142,1)","rgba(43,123,142,1)","rgba(43,123,142,1)","rgba(43,123,142,1)","rgba(43,124,141,1)","rgba(43,125,141,1)","rgba(43,125,141,1)","rgba(43,125,141,1)","rgba(43,126,141,1)","rgba(43,126,141,1)","rgba(43,126,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,129,140,1)","rgba(43,129,140,1)","rgba(43,130,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,132,140,1)","rgba(44,132,140,1)","rgba(44,133,140,1)","rgba(44,133,140,1)","rgba(44,133,140,1)","rgba(44,133,140,1)","rgba(44,134,139,1)","rgba(44,135,139,1)","rgba(44,135,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,137,139,1)","rgba(44,138,139,1)","rgba(44,138,139,1)","rgba(44,138,139,1)","rgba(44,139,138,1)","rgba(44,139,138,1)","rgba(43,139,138,1)","rgba(43,139,138,1)","rgba(43,140,138,1)","rgba(43,140,138,1)","rgba(43,140,138,1)","rgba(43,140,138,1)","rgba(43,140,138,1)","rgba(43,141,138,1)","rgba(43,141,138,1)","rgba(43,141,138,1)","rgba(43,142,138,1)","rgba(43,142,138,1)","rgba(43,142,138,1)","rgba(43,143,138,1)","rgba(43,146,137,1)","rgba(43,146,137,1)","rgba(43,146,137,1)","rgba(43,146,137,1)","rgba(43,146,137,1)","rgba(42,147,137,1)","rgba(42,147,137,1)","rgba(42,147,137,1)","rgba(42,148,137,1)","rgba(42,149,136,1)","rgba(42,150,136,1)","rgba(41,152,136,1)","rgba(41,152,136,1)","rgba(41,152,136,1)","rgba(41,154,135,1)","rgba(41,154,135,1)","rgba(41,154,135,1)","rgba(41,154,135,1)","rgba(40,156,135,1)","rgba(40,169,131,1)","rgba(52,172,127,1)","rgba(77,182,116,1)","rgba(79,183,116,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(253,231,37,1)"],"opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":["rgba(68,1,84,1)","rgba(70,38,107,1)","rgba(70,39,108,1)","rgba(70,41,110,1)","rgba(69,46,114,1)","rgba(69,47,115,1)","rgba(69,48,116,1)","rgba(69,49,117,1)","rgba(69,49,117,1)","rgba(69,50,118,1)","rgba(69,50,118,1)","rgba(68,55,122,1)","rgba(68,55,123,1)","rgba(68,57,124,1)","rgba(68,58,125,1)","rgba(68,58,125,1)","rgba(67,59,127,1)","rgba(67,61,128,1)","rgba(67,61,128,1)","rgba(65,67,134,1)","rgba(65,68,135,1)","rgba(65,70,135,1)","rgba(65,71,135,1)","rgba(64,72,136,1)","rgba(64,74,136,1)","rgba(64,75,136,1)","rgba(64,77,136,1)","rgba(64,77,136,1)","rgba(63,80,137,1)","rgba(62,85,137,1)","rgba(60,90,138,1)","rgba(58,96,139,1)","rgba(57,99,139,1)","rgba(57,99,139,1)","rgba(56,101,140,1)","rgba(56,102,140,1)","rgba(55,103,140,1)","rgba(55,103,140,1)","rgba(54,105,140,1)","rgba(54,105,140,1)","rgba(54,105,140,1)","rgba(53,105,140,1)","rgba(53,106,140,1)","rgba(53,106,140,1)","rgba(53,106,140,1)","rgba(53,106,140,1)","rgba(53,107,140,1)","rgba(52,107,140,1)","rgba(52,108,140,1)","rgba(52,108,140,1)","rgba(52,108,140,1)","rgba(52,108,140,1)","rgba(52,108,141,1)","rgba(52,108,141,1)","rgba(52,108,141,1)","rgba(50,110,141,1)","rgba(50,110,141,1)","rgba(50,110,141,1)","rgba(50,111,141,1)","rgba(50,111,141,1)","rgba(50,111,141,1)","rgba(49,113,141,1)","rgba(48,113,141,1)","rgba(48,113,141,1)","rgba(48,113,141,1)","rgba(48,113,141,1)","rgba(48,114,141,1)","rgba(48,114,141,1)","rgba(48,114,141,1)","rgba(47,114,141,1)","rgba(47,115,141,1)","rgba(46,116,141,1)","rgba(46,116,142,1)","rgba(46,116,142,1)","rgba(45,117,142,1)","rgba(44,118,142,1)","rgba(43,119,142,1)","rgba(42,122,142,1)","rgba(42,122,142,1)","rgba(43,123,142,1)","rgba(43,123,142,1)","rgba(43,123,142,1)","rgba(43,123,142,1)","rgba(43,124,141,1)","rgba(43,125,141,1)","rgba(43,125,141,1)","rgba(43,125,141,1)","rgba(43,126,141,1)","rgba(43,126,141,1)","rgba(43,126,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,127,141,1)","rgba(43,129,140,1)","rgba(43,129,140,1)","rgba(43,130,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,131,140,1)","rgba(44,132,140,1)","rgba(44,132,140,1)","rgba(44,133,140,1)","rgba(44,133,140,1)","rgba(44,133,140,1)","rgba(44,133,140,1)","rgba(44,134,139,1)","rgba(44,135,139,1)","rgba(44,135,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,136,139,1)","rgba(44,137,139,1)","rgba(44,138,139,1)","rgba(44,138,139,1)","rgba(44,138,139,1)","rgba(44,139,138,1)","rgba(44,139,138,1)","rgba(43,139,138,1)","rgba(43,139,138,1)","rgba(43,140,138,1)","rgba(43,140,138,1)","rgba(43,140,138,1)","rgba(43,140,138,1)","rgba(43,140,138,1)","rgba(43,141,138,1)","rgba(43,141,138,1)","rgba(43,141,138,1)","rgba(43,142,138,1)","rgba(43,142,138,1)","rgba(43,142,138,1)","rgba(43,143,138,1)","rgba(43,146,137,1)","rgba(43,146,137,1)","rgba(43,146,137,1)","rgba(43,146,137,1)","rgba(43,146,137,1)","rgba(42,147,137,1)","rgba(42,147,137,1)","rgba(42,147,137,1)","rgba(42,148,137,1)","rgba(42,149,136,1)","rgba(42,150,136,1)","rgba(41,152,136,1)","rgba(41,152,136,1)","rgba(41,152,136,1)","rgba(41,154,135,1)","rgba(41,154,135,1)","rgba(41,154,135,1)","rgba(41,154,135,1)","rgba(40,156,135,1)","rgba(40,169,131,1)","rgba(52,172,127,1)","rgba(77,182,116,1)","rgba(79,183,116,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(158,215,73,1)","rgba(253,231,37,1)"]}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0],"y":[0.25],"name":"eb5ab06c428902106adb8a9c5d5ab710","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FDE725"],[0.0033444816053512134,"#FBE726"],[0.0066889632107024269,"#F9E627"],[0.01003344481605364,"#F7E629"],[0.013377926421404569,"#F5E62A"],[0.016722408026755783,"#F3E52B"],[0.020066889632106996,"#F1E52C"],[0.02341137123745821,"#EFE52D"],[0.026755852842809423,"#EDE42E"],[0.030100334448160636,"#EBE42F"],[0.033444816053511565,"#E9E430"],[0.036789297658862775,"#E7E331"],[0.040133779264213992,"#E5E332"],[0.043478260869565202,"#E3E333"],[0.046822742474916419,"#E1E233"],[0.050167224080267629,"#DFE234"],[0.053511705685618846,"#DDE235"],[0.056856187290969772,"#DBE136"],[0.060200668896320988,"#D9E137"],[0.063545150501672198,"#D7E138"],[0.066889632107023408,"#D5E038"],[0.070234113712374632,"#D3E039"],[0.073578595317725842,"#D1E03A"],[0.076923076923077052,"#CFDF3B"],[0.080267558528427985,"#CDDF3B"],[0.083612040133779195,"#CBDF3C"],[0.086956521739130405,"#C8DE3D"],[0.090301003344481628,"#C6DE3E"],[0.093645484949832838,"#C4DE3E"],[0.096989966555184048,"#C2DD3F"],[0.10033444816053526,"#C0DD40"],[0.10367892976588619,"#BEDC40"],[0.1070234113712374,"#BCDC41"],[0.11036789297658862,"#BADC42"],[0.11371237458193983,"#B7DB42"],[0.11705685618729104,"#B5DB43"],[0.12040133779264225,"#B3DB44"],[0.12374581939799319,"#B1DA44"],[0.1270903010033444,"#AFDA45"],[0.13043478260869562,"#ACD946"],[0.13377926421404682,"#AAD946"],[0.13712374581939804,"#A8D947"],[0.14046822742474926,"#A6D847"],[0.14381270903010046,"#A3D848"],[0.14715719063545141,"#A1D748"],[0.1505016722408026,"#9FD749"],[0.1538461538461541,"#9DD74A"],[0.15719063545150505,"#9AD64A"],[0.16053511705685597,"#98D64B"],[0.16387959866220747,"#95D54B"],[0.16722408026755839,"#93D54C"],[0.17056856187290989,"#91D54C"],[0.17391304347826081,"#8ED44D"],[0.17725752508361231,"#8CD44D"],[0.18060200668896326,"#89D34E"],[0.18394648829431418,"#87D34F"],[0.18729096989966568,"#84D34F"],[0.1906354515050166,"#81D250"],[0.1939799331103681,"#7FD250"],[0.19732441471571902,"#7CD151"],[0.20066889632106996,"#7AD151"],[0.20401337792642146,"#79D052"],[0.20735785953177238,"#78CF53"],[0.21070234113712388,"#77CF54"],[0.2140468227424748,"#76CE55"],[0.2173913043478263,"#75CD56"],[0.22073578595317725,"#74CD57"],[0.22408026755852817,"#73CC58"],[0.22742474916387967,"#72CB59"],[0.23076923076923059,"#71CB5A"],[0.23411371237458209,"#70CA5B"],[0.23745819397993301,"#6FC95C"],[0.24080267558528451,"#6EC85D"],[0.24414715719063546,"#6DC85E"],[0.24749163879598637,"#6CC75F"],[0.25083612040133785,"#6BC660"],[0.25418060200668879,"#6AC661"],[0.2575250836120403,"#69C562"],[0.26086956521739124,"#67C463"],[0.26421404682274274,"#66C464"],[0.26755852842809363,"#65C365"],[0.27090301003344458,"#64C266"],[0.27424749163879608,"#63C166"],[0.27759197324414703,"#62C167"],[0.28093645484949853,"#61C068"],[0.28428093645484942,"#5FBF69"],[0.28762541806020092,"#5EBF6A"],[0.29096989966555187,"#5DBE6B"],[0.29431438127090281,"#5CBD6C"],[0.29765886287625432,"#5BBD6C"],[0.30100334448160521,"#59BC6D"],[0.30434782608695671,"#58BB6E"],[0.30769230769230765,"#57BB6F"],[0.3110367892976586,"#55BA70"],[0.3143812709030101,"#54B971"],[0.31772575250836099,"#53B971"],[0.32107023411371249,"#51B872"],[0.32441471571906344,"#50B773"],[0.32775919732441494,"#4EB674"],[0.33110367892976583,"#4DB675"],[0.33444816053511733,"#4BB575"],[0.33779264214046828,"#4AB476"],[0.34113712374581923,"#48B477"],[0.34448160535117073,"#47B378"],[0.34782608695652162,"#45B278"],[0.35117056856187312,"#43B279"],[0.35451505016722407,"#42B17A"],[0.35785953177257501,"#40B07B"],[0.36120401337792651,"#3EB07B"],[0.3645484949832774,"#3CAF7C"],[0.36789297658862891,"#3AAE7D"],[0.37123745819397985,"#38AE7E"],[0.37458193979933135,"#36AD7E"],[0.3779264214046823,"#34AC7F"],[0.38127090301003319,"#32AC80"],[0.38461538461538469,"#2FAB81"],[0.38795986622073564,"#2DAA81"],[0.39130434782608714,"#2AAA82"],[0.39464882943143803,"#27A983"],[0.39799331103678953,"#24A884"],[0.40133779264214048,"#22A884"],[0.40468227424749142,"#23A784"],[0.40802675585284293,"#23A684"],[0.41137123745819382,"#24A585"],[0.41471571906354532,"#24A485"],[0.41806020066889626,"#25A485"],[0.42140468227424721,"#25A385"],[0.42474916387959871,"#26A285"],[0.4280936454849496,"#26A186"],[0.4314381270903011,"#26A086"],[0.43478260869565205,"#27A086"],[0.43812709030100355,"#279F86"],[0.4414715719063545,"#279E86"],[0.444816053511706,"#289D87"],[0.44816053511705689,"#289C87"],[0.45150501672240784,"#289B87"],[0.45484949832775934,"#299B87"],[0.45819397993311028,"#299A87"],[0.46153846153846173,"#299987"],[0.46488294314381268,"#299888"],[0.46822742474916362,"#2A9788"],[0.47157190635451512,"#2A9788"],[0.47491638795986602,"#2A9688"],[0.47826086956521752,"#2A9588"],[0.48160535117056846,"#2A9489"],[0.48494983277591996,"#2A9389"],[0.48829431438127091,"#2B9389"],[0.49163879598662241,"#2B9289"],[0.4949832775919733,"#2B9189"],[0.49832775919732425,"#2B9089"],[0.5016722408026757,"#2B8F8A"],[0.50501672240802664,"#2B8F8A"],[0.50836120401337814,"#2B8E8A"],[0.51170568561872909,"#2B8D8A"],[0.51505016722408004,"#2B8C8A"],[0.51839464882943154,"#2B8B8A"],[0.52173913043478248,"#2C8B8B"],[0.52508361204013398,"#2C8A8B"],[0.52842809364548493,"#2C898B"],[0.53177257525083577,"#2C888B"],[0.53511705685618727,"#2C878B"],[0.53846153846153821,"#2C878B"],[0.54180602006688972,"#2C868B"],[0.54515050167224066,"#2C858C"],[0.54849498327759216,"#2C848C"],[0.55183946488294311,"#2C838C"],[0.55518394648829461,"#2B838C"],[0.55852842809364556,"#2B828C"],[0.5618729096989965,"#2B818C"],[0.565217391304348,"#2B808D"],[0.56856187290969884,"#2B7F8D"],[0.57190635451505034,"#2B7F8D"],[0.57525083612040129,"#2B7E8D"],[0.57859531772575223,"#2B7D8D"],[0.58193979933110374,"#2B7C8D"],[0.58528428093645468,"#2B7B8D"],[0.58862876254180618,"#2B7B8E"],[0.59197324414715713,"#2A7A8E"],[0.59531772575250863,"#2A798E"],[0.59866220735785947,"#2A788E"],[0.60200668896321097,"#2B778E"],[0.60535117056856191,"#2B778E"],[0.60869565217391286,"#2C768E"],[0.61204013377926436,"#2D758E"],[0.61538461538461531,"#2E748E"],[0.61872909698996681,"#2F738D"],[0.62207357859531776,"#2F728D"],[0.6254180602006687,"#30718D"],[0.6287625418060202,"#31718D"],[0.63210702341137104,"#31708D"],[0.63545150501672254,"#326F8D"],[0.63879598662207349,"#326E8D"],[0.64214046822742443,"#336D8D"],[0.64548494983277593,"#346C8D"],[0.64882943143812744,"#346B8C"],[0.65217391304347838,"#356B8C"],[0.65551839464882933,"#356A8C"],[0.65886287625418083,"#36698C"],[0.66220735785953166,"#36688C"],[0.66555183946488317,"#37678C"],[0.66889632107023411,"#37668C"],[0.67224080267558506,"#38658C"],[0.67558528428093656,"#38658C"],[0.67892976588628751,"#38648B"],[0.68227424749163901,"#39638B"],[0.68561872909698995,"#39628B"],[0.6889632107023409,"#3A618B"],[0.6923076923076924,"#3A608B"],[0.69565217391304324,"#3A5F8B"],[0.69899665551839474,"#3B5F8B"],[0.70234113712374568,"#3B5E8B"],[0.70568561872909719,"#3B5D8A"],[0.70903010033444813,"#3C5C8A"],[0.71237458193979963,"#3C5B8A"],[0.71571906354515058,"#3C5A8A"],[0.71906354515050153,"#3D598A"],[0.72240802675585303,"#3D598A"],[0.72575250836120386,"#3D588A"],[0.72909698996655536,"#3D578A"],[0.73244147157190631,"#3E568A"],[0.73578595317725726,"#3E5589"],[0.73913043478260876,"#3E5489"],[0.7424749163879597,"#3E5389"],[0.74581939799331121,"#3F5289"],[0.74916387959866215,"#3F5289"],[0.7525083612040131,"#3F5189"],[0.7558528428093646,"#3F5089"],[0.7591973244147161,"#3F4F89"],[0.76254180602006694,"#404E88"],[0.76588628762541788,"#404D88"],[0.76923076923076938,"#404C88"],[0.77257525083612033,"#404B88"],[0.77591973244147183,"#404A88"],[0.77926421404682278,"#404A88"],[0.78260869565217372,"#404988"],[0.78595317725752523,"#414888"],[0.78929765886287606,"#414787"],[0.79264214046822756,"#414687"],[0.79598662207357851,"#414587"],[0.79933110367892946,"#414487"],[0.80267558528428096,"#414386"],[0.80602006688963246,"#424285"],[0.8093645484949834,"#424185"],[0.81270903010033435,"#424184"],[0.81605351170568585,"#424083"],[0.8193979933110368,"#433F82"],[0.8227424749163883,"#433E81"],[0.82608695652173914,"#433D80"],[0.82943143812709008,"#433C7F"],[0.83277591973244158,"#433B7E"],[0.83612040133779253,"#443A7D"],[0.83946488294314403,"#44397D"],[0.84280936454849498,"#44387C"],[0.84615384615384592,"#44377B"],[0.84949832775919742,"#44367A"],[0.85284280936454837,"#443679"],[0.85618729096989976,"#443578"],[0.85953177257525071,"#453477"],[0.86287625418060165,"#453377"],[0.86622073578595316,"#453276"],[0.86956521739130466,"#453175"],[0.8729096989966556,"#453074"],[0.87625418060200655,"#452F73"],[0.87959866220735805,"#452E72"],[0.882943143812709,"#452D71"],[0.8862876254180605,"#452C70"],[0.88963210702341133,"#452B70"],[0.89297658862876228,"#462A6F"],[0.89632107023411378,"#46296E"],[0.89966555183946473,"#46286D"],[0.90301003344481623,"#46276C"],[0.90635451505016718,"#46266B"],[0.90969899665551812,"#46256B"],[0.91304347826086962,"#46246A"],[0.91638795986622112,"#462369"],[0.91973244147157207,"#462268"],[0.92307692307692291,"#462167"],[0.92642140468227441,"#462066"],[0.92976588628762535,"#461F65"],[0.93311036789297686,"#461E65"],[0.9364548494983278,"#461D64"],[0.93979933110367875,"#461B63"],[0.94314381270903025,"#461A62"],[0.9464882943143812,"#451961"],[0.9498327759197327,"#451860"],[0.95317725752508353,"#451760"],[0.95652173913043448,"#45155F"],[0.95986622073578598,"#45145E"],[0.96321070234113693,"#45135D"],[0.96655518394648843,"#45115C"],[0.96989966555183937,"#45105B"],[0.97324414715719032,"#450E5B"],[0.97658862876254182,"#450D5A"],[0.97993311036789332,"#450B59"],[0.98327759197324427,"#450958"],[0.9866220735785951,"#450857"],[0.98996655518394661,"#440656"],[0.99331103678929755,"#440456"],[0.99665551839464905,"#440355"],[1,"#440154"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"thickness":23.039999999999996,"title":"AUC","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickmode":"array","ticktext":["0.50","0.55","0.60","0.65"],"tickvals":[0.15224717803822088,0.40823404736986313,0.66422091670150563,0.92020778603314723],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Standard Preprocessing, Elastic Net","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.050000000000000003,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Penalty","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.0037182264266390069,1.0448108598783641],"tickmode":"array","ticktext":["0.25","0.50","0.75","1.00"],"tickvals":[0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Mixture","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"AUC","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3498eea6eea":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"3498eea6eea","visdat":{"3498eea6eea":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>stand_log_penalty <span class="ot">&lt;-</span> <span class="fl">0.06319747</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>stand_log_mixture <span class="ot">&lt;-</span> <span class="fl">0.05603853</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pca-preprocessing-lasso" class="level3" data-number="15.11.4">
<h3 data-number="15.11.4" class="anchored" data-anchor-id="pca-preprocessing-lasso"><span class="header-section-number">15.11.4</span> PCA Preprocessing, Lasso</h3>
<p>By inspecting the plot, it would seem the optimal <code>penalty</code> is indeed at the optimum <code>roc_auc</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(grid_results,</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">id =</span> <span class="st">"pca_log_lasso"</span>,</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">metric =</span> <span class="st">"roc_auc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The manually chosen hyperparameter is collected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>pca_log_lasso_penalty <span class="ot">&lt;-</span> grid_results <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_workflow_set_result</span>(<span class="st">"pca_log_lasso"</span>) <span class="sc">|&gt;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"roc_auc"</span>,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(penalty)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>pca_log_lasso_mixture <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pca-preprocessing-ridge" class="level3" data-number="15.11.5">
<h3 data-number="15.11.5" class="anchored" data-anchor-id="pca-preprocessing-ridge"><span class="header-section-number">15.11.5</span> PCA Preprocessing, Ridge</h3>
<p>By inspecting the plot, the ROC values do not vary much with the penalty. The optimal <code>penalty</code> is chosen to be the maximum <code>penalty</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(grid_results,</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">id =</span> <span class="st">"pca_log_ridge"</span>,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">metric =</span> <span class="st">"roc_auc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The manually chosen hyperparameter is collected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>pca_log_ridge_penalty <span class="ot">&lt;-</span> grid_results <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_workflow_set_result</span>(<span class="st">"pca_log_ridge"</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"roc_auc"</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> params<span class="sc">$</span>grid_size) <span class="sc">|&gt;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(penalty) <span class="sc">|&gt;</span> </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">max</span>()</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>pca_log_ridge_mixture <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pca-preprocessing-elastic-net" class="level3" data-number="15.11.6">
<h3 data-number="15.11.6" class="anchored" data-anchor-id="pca-preprocessing-elastic-net"><span class="header-section-number">15.11.6</span> PCA Preprocessing, Elastic Net</h3>
<p>Again, the hyperparameter values are plotted against each other, and the colour signifies the AUC. The best AUC are the more purple colors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>pca_log_plot <span class="ot">&lt;-</span> grid_results <span class="sc">|&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_workflow_set_result</span>(<span class="st">"pca_log"</span>) <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">"roc_auc"</span>,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> params<span class="sc">$</span>grid_size) <span class="sc">|&gt;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> penalty,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> mixture,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> mean)) <span class="sc">+</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(<span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PCA Preprocessing, Elastic Net"</span>,</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Penalty"</span>,</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mixture"</span>,</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"AUC"</span>)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>pca_log_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>To better see the effect of the hyperparameters on the AUC, the x-axis is limited as the higher values are observed close to <span class="math inline">\(penalty = 0\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> pca_log_plot <span class="sc">+</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-b4248302d49d8728f24b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b4248302d49d8728f24b">{"x":{"data":[{"x":[0.0020241734037075351,1.7845104259886204e-08,0.00065853956099673385,2.824064109574955e-05,4.2193131340070726e-10,1.0211513325361671e-09,1.6920529708184228e-09,0.00014312336066914561,2.2765434224695857e-07,5.393986732290897e-08,1.9742229376594024e-09,0.0014667132732052569,1.6555968089685171e-06,3.0791977304788148e-08,0.0010177641222362446,4.7142267910785397e-07,3.9407653496131222e-08,1.1312953821157616e-07,2.86516837104417e-08,9.2256086086557139e-07,0.00010636162899647054,4.5120396863713756e-08,8.9589100796870813e-10,0.00067605827543678644,7.6359381619774942e-08,1.3507247794812083e-06,1.164158568224593e-06,7.9167624692181612e-06,1.2400564830934803e-06,5.7852312950333695e-10,3.7481591503023249e-06,0.00011495458649789507,4.7512036326715502e-05,1.5255420233482344e-07,7.1220729007447195e-05,5.6067235110300393e-07,1.2399450334308629e-05,1.7946981190453831e-05,6.4826738086470823e-10,2.929702895942869e-09,1.4774198763474688e-05,8.5843485488932744e-07,1.6601986510421055e-10,5.9797077966085735e-09,2.9054425874004855e-07,2.0620323063430488e-05,6.7008849633480376e-06,7.9744978076917729e-10,2.2650531070006931e-10,0.00058064865512536315,5.3426512710362859e-07,3.4790412249854677e-10,1.1509096153849011e-09,1.5199858554967866e-09,0.00075336537973464323,1.9906074336133899e-10,0.00030070759643262713,7.2617505181028278e-07,9.3410959043493999e-09,0.00088539164758970367,0.00042254165956115024,2.5615150166180124e-05,4.7793419494262385e-10,2.0224484129505321e-08,3.0430713073296685e-07,1.0243871692675817e-07,1.4565280631680425e-08,0.0003390543069611036,3.2247469841970835e-05,3.7542011659839961e-07,1.1064309998619954e-08,2.4558646534143199e-06,2.0237223910153482e-07,0.00037328226464055329,9.9413224761635264e-09,3.5769662945243744e-08,2.7234606237630649e-10,1.2935463463527e-07,4.0167512888695141e-05,2.3791391189442098e-08,1.9820895521985441e-07,5.471363523154967e-05,3.6858412811653098e-09,1.0598000662130934e-05,0.00019087761001733138,4.0060643417726394e-09,1.0078100629107036e-10,0.000212269938645908,3.4630802916416437e-06,6.4048940927577091e-07,2.1418398646833643e-06,2.6596411351083454e-06,0.0001504869481831588,6.7336808639254848e-09,0.00025340678117206325,3.8692149924543076e-10,4.8641964803618032e-06,6.8967686642187936e-10,9.1781175624084277e-06,3.0072061286511474e-10,0.0027904186395037952,1.1689684208040374e-10,2.2860955245336137e-09,5.374097879302093e-06,3.1988483554901233e-09,0.0024136915902237422,6.0049915243812176e-05,8.1910737275208737e-09,1.304407161569941e-09,4.4709986778166699e-09,5.7362824475114669e-08,7.0844524207551518e-08,1.5280103099444241e-05,1.9118502239269855e-06,8.2209753667927531e-05,2.4450809376033931e-09,1.5641000230363031e-07,0.0012545733898655005,5.1388156769812524e-09,8.902268059568852e-05,1.3793388810851333e-10,9.15214183063898e-08,2.0777195920762428e-08,1.5091556784238956e-10,2.3843856097403737e-05,1.2518892282953761e-08,0.00017799749515749977,0.0004712620270909603,4.5158537513774745e-05,3.9770504150623362e-07,7.4025974499076115e-06,2.9400381610595088e-06,4.503904845957491e-06,0.0016239464398585732,0.0011282993132160197,0.0038395173977909787,0.008701456860565537,0.0048873051512107737,0.0022113539217984385,0.0078699558410682251,0.0055551098519693327,0.0034005037444877545,0.013144012025709055,0.0041907178183549472,0.025315441368361707,0.015659634545226179,0.0062138552205980302,0.0068273033629787094,0.0095275563237128373,0.063197470366247482,0.017501482505939664,0.011621852549906091,0.045413787756120629,0.021769798216572343,0.018258850223910588,0.03936262057312994,0.028193753169788099,0.032891405466261722,0.33799350350986723,0.037997192355372737,0.19883093568835414,0.11295022747094154,0.09223827385783552,0.049953994537004782,0.058565798280372186,null,null,0.77674606659077416,null,null,0.49180951788087046,null,0.91749340572814431,null,0.38796000553716631,null,0.19524051060035696,0.54340385778768563,null,0.23475199522567952,0.15570289931808953,null,0.89156071549174598,0.29226820788289387,0.68131851268654486,null,null,0.10208343856354854,null,null,null,null,null,0.079380772088935111,null,0.47029145686855439,0.14979095588868929,0.12261848832366704,0.27875996247323298,null],"y":[0.23598530548723645,0.35668076702568213,0.36313635426468682,0.37156672072876246,0.38647445263655389,0.38770558195764893,0.40090494918351754,0.40388389917893797,0.40830939423933155,0.41229315490520091,0.42015431628149236,0.42577550837589656,0.43248999386781356,0.43932475971145318,0.44390796919976128,0.44833816268737425,0.45478698233695464,0.47183656691003117,0.47413100088521604,0.48286375719989877,0.49043737128359499,0.49560583936062169,0.50434945042809698,0.51597155658033445,0.52583526466001063,0.53104090002598237,0.54131859883398281,0.55256359681230971,0.55919703244039554,0.56592241612111682,0.57694662442675326,0.58042881763115295,0.59004212742921658,0.59353947465022794,0.5989219843758038,0.60151046838227196,0.60594162963639253,0.62351310539356208,0.62906277330685401,0.63032791376725072,0.6386184358752216,0.63905726913234684,0.65115045508294134,0.66144440620328526,0.66436035596026344,0.67566116795846021,0.68889945177832845,0.69595693580049556,0.69720177493256053,0.70372248185845099,0.7061784658510587,0.71376368645293409,0.71792305309709625,0.72134103478613543,0.72537688501441155,0.73724597197584807,0.74152755723643349,0.75847308039711792,0.76839513922389602,0.77897512445447503,0.7874413635787787,0.79550278716784673,0.79642607165145451,0.80866921017889404,0.8140070061805309,0.8152866423213273,0.81955345866107387,0.8290348858803045,0.83923606664431283,0.84651031903485996,0.8598730433743913,0.86453907268954211,0.87486631464905806,0.88339222330081979,0.89081674904993269,0.89637938308221055,0.90093367017980197,0.91225817372713935,0.92828321175923334,0.93190861521527413,0.937390118732641,0.93898273172962943,0.94762538214528469,0.95246320569230014,0.96243729354202512,0.96706518703530309,0.98204523121216336,0.98678583774523576,0.993071345815144,0.051040618856262883,0.062556108826480342,0.069905737970548221,0.076174985230027234,0.083688179022865378,0.088540154388581871,0.097462790062476407,0.1000427515861229,0.10346527504076949,0.10909149694128428,0.11377612772985594,0.12066577821091051,0.12907343453197972,0.13422120394319065,0.14377521601720947,0.1458525755900773,0.15387685828801478,0.1607231424318743,0.1726829049582593,0.17795209780440202,0.18207177519233664,0.19150148961937519,0.19617180772061693,0.19850273423740872,0.20477561482001327,0.20797405881650044,0.21470456672343424,0.22567927496298218,0.22684270820964592,0.23248309698188674,0.24052104553941173,0.24871753874490971,0.25763025040877979,0.26348808208218544,0.2699385273268563,0.2787270430398639,0.28993369098351102,0.29554767700540829,0.2984957143891952,0.31960334393638185,0.3289308802767773,0.33330943465692686,0.34519230217445868,0.35225866774236786,0.58548525788349803,0.8499761940545868,0.32209742049511986,0.07957854776346357,0.39554566772759425,0.90650251309992746,0.31489755056548163,0.49974209013569632,0.88631112079531893,0.18335380978288596,0.75333060940075669,0.13906285749358357,0.3790143410077435,0.78520723771949996,0.67158592646324544,0.68052457147988032,0.056038534795516175,0.21633938331069658,0.73247358440619426,0.33804601655347505,0.64775210442853859,0.75056986238306855,0.53463373226503608,0.74598031237948459,0.85453800066071561,0.12525226385833232,0.97309848298109136,0.15805603871878704,0.30799186894349984,0.50865893462853273,0.92234064533305349,0.8361947625867906,0.068928002201020716,0.16812513319432038,0.25150362808920906,0.26545811888552268,0.27636304227448999,0.28612390204792609,0.30605163801548763,0.3400292806780198,0.36551270857686174,0.37641343595640497,0.42342623713426286,0.45016588754998521,0.45865129066258664,0.46428629395773163,0.47752235892234601,0.51515726201725198,0.5227314853055286,0.54870951367221998,0.55662500317965169,0.57242079207854113,0.61249095533665976,0.61951436671236293,0.65332221266540003,0.68477991498482882,0.76329173376696424,0.77619330096116756,0.80411075827170864,0.82683240781660428,0.86814090792817289,0.8791649226999726,0.91760180883045539,0.95636768513685089,0.95984679849632082,0.98050118890212623,0.99748846744874031],"text":["penalty: 2.024173e-03<br />mixture: 0.23598531<br />mean: 0.6921150","penalty: 1.784510e-08<br />mixture: 0.35668077<br />mean: 0.6921150","penalty: 6.585396e-04<br />mixture: 0.36313635<br />mean: 0.6921150","penalty: 2.824064e-05<br />mixture: 0.37156672<br />mean: 0.6921150","penalty: 4.219313e-10<br />mixture: 0.38647445<br />mean: 0.6921150","penalty: 1.021151e-09<br />mixture: 0.38770558<br />mean: 0.6921150","penalty: 1.692053e-09<br />mixture: 0.40090495<br />mean: 0.6921150","penalty: 1.431234e-04<br />mixture: 0.40388390<br />mean: 0.6921150","penalty: 2.276543e-07<br />mixture: 0.40830939<br />mean: 0.6921150","penalty: 5.393987e-08<br />mixture: 0.41229315<br />mean: 0.6921150","penalty: 1.974223e-09<br />mixture: 0.42015432<br />mean: 0.6921150","penalty: 1.466713e-03<br />mixture: 0.42577551<br />mean: 0.6921150","penalty: 1.655597e-06<br />mixture: 0.43248999<br />mean: 0.6921150","penalty: 3.079198e-08<br />mixture: 0.43932476<br />mean: 0.6921150","penalty: 1.017764e-03<br />mixture: 0.44390797<br />mean: 0.6921150","penalty: 4.714227e-07<br />mixture: 0.44833816<br />mean: 0.6921150","penalty: 3.940765e-08<br />mixture: 0.45478698<br />mean: 0.6921150","penalty: 1.131295e-07<br />mixture: 0.47183657<br />mean: 0.6921150","penalty: 2.865168e-08<br />mixture: 0.47413100<br />mean: 0.6921150","penalty: 9.225609e-07<br />mixture: 0.48286376<br />mean: 0.6921150","penalty: 1.063616e-04<br />mixture: 0.49043737<br />mean: 0.6921150","penalty: 4.512040e-08<br />mixture: 0.49560584<br />mean: 0.6921150","penalty: 8.958910e-10<br />mixture: 0.50434945<br />mean: 0.6921150","penalty: 6.760583e-04<br />mixture: 0.51597156<br />mean: 0.6921150","penalty: 7.635938e-08<br />mixture: 0.52583526<br />mean: 0.6921150","penalty: 1.350725e-06<br />mixture: 0.53104090<br />mean: 0.6921150","penalty: 1.164159e-06<br />mixture: 0.54131860<br />mean: 0.6921150","penalty: 7.916762e-06<br />mixture: 0.55256360<br />mean: 0.6921150","penalty: 1.240056e-06<br />mixture: 0.55919703<br />mean: 0.6921150","penalty: 5.785231e-10<br />mixture: 0.56592242<br />mean: 0.6921150","penalty: 3.748159e-06<br />mixture: 0.57694662<br />mean: 0.6921150","penalty: 1.149546e-04<br />mixture: 0.58042882<br />mean: 0.6921150","penalty: 4.751204e-05<br />mixture: 0.59004213<br />mean: 0.6921150","penalty: 1.525542e-07<br />mixture: 0.59353947<br />mean: 0.6921150","penalty: 7.122073e-05<br />mixture: 0.59892198<br />mean: 0.6921150","penalty: 5.606724e-07<br />mixture: 0.60151047<br />mean: 0.6921150","penalty: 1.239945e-05<br />mixture: 0.60594163<br />mean: 0.6921150","penalty: 1.794698e-05<br />mixture: 0.62351311<br />mean: 0.6921150","penalty: 6.482674e-10<br />mixture: 0.62906277<br />mean: 0.6921150","penalty: 2.929703e-09<br />mixture: 0.63032791<br />mean: 0.6921150","penalty: 1.477420e-05<br />mixture: 0.63861844<br />mean: 0.6921150","penalty: 8.584349e-07<br />mixture: 0.63905727<br />mean: 0.6921150","penalty: 1.660199e-10<br />mixture: 0.65115046<br />mean: 0.6921150","penalty: 5.979708e-09<br />mixture: 0.66144441<br />mean: 0.6921150","penalty: 2.905443e-07<br />mixture: 0.66436036<br />mean: 0.6921150","penalty: 2.062032e-05<br />mixture: 0.67566117<br />mean: 0.6921150","penalty: 6.700885e-06<br />mixture: 0.68889945<br />mean: 0.6921150","penalty: 7.974498e-10<br />mixture: 0.69595694<br />mean: 0.6921150","penalty: 2.265053e-10<br />mixture: 0.69720177<br />mean: 0.6921150","penalty: 5.806487e-04<br />mixture: 0.70372248<br />mean: 0.6921150","penalty: 5.342651e-07<br />mixture: 0.70617847<br />mean: 0.6921150","penalty: 3.479041e-10<br />mixture: 0.71376369<br />mean: 0.6921150","penalty: 1.150910e-09<br />mixture: 0.71792305<br />mean: 0.6921150","penalty: 1.519986e-09<br />mixture: 0.72134103<br />mean: 0.6921150","penalty: 7.533654e-04<br />mixture: 0.72537689<br />mean: 0.6921150","penalty: 1.990607e-10<br />mixture: 0.73724597<br />mean: 0.6921150","penalty: 3.007076e-04<br />mixture: 0.74152756<br />mean: 0.6921150","penalty: 7.261751e-07<br />mixture: 0.75847308<br />mean: 0.6921150","penalty: 9.341096e-09<br />mixture: 0.76839514<br />mean: 0.6921150","penalty: 8.853916e-04<br />mixture: 0.77897512<br />mean: 0.6921150","penalty: 4.225417e-04<br />mixture: 0.78744136<br />mean: 0.6921150","penalty: 2.561515e-05<br />mixture: 0.79550279<br />mean: 0.6921150","penalty: 4.779342e-10<br />mixture: 0.79642607<br />mean: 0.6921150","penalty: 2.022448e-08<br />mixture: 0.80866921<br />mean: 0.6921150","penalty: 3.043071e-07<br />mixture: 0.81400701<br />mean: 0.6921150","penalty: 1.024387e-07<br />mixture: 0.81528664<br />mean: 0.6921150","penalty: 1.456528e-08<br />mixture: 0.81955346<br />mean: 0.6921150","penalty: 3.390543e-04<br />mixture: 0.82903489<br />mean: 0.6921150","penalty: 3.224747e-05<br />mixture: 0.83923607<br />mean: 0.6921150","penalty: 3.754201e-07<br />mixture: 0.84651032<br />mean: 0.6921150","penalty: 1.106431e-08<br />mixture: 0.85987304<br />mean: 0.6921150","penalty: 2.455865e-06<br />mixture: 0.86453907<br />mean: 0.6921150","penalty: 2.023722e-07<br />mixture: 0.87486631<br />mean: 0.6921150","penalty: 3.732823e-04<br />mixture: 0.88339222<br />mean: 0.6921150","penalty: 9.941322e-09<br />mixture: 0.89081675<br />mean: 0.6921150","penalty: 3.576966e-08<br />mixture: 0.89637938<br />mean: 0.6921150","penalty: 2.723461e-10<br />mixture: 0.90093367<br />mean: 0.6921150","penalty: 1.293546e-07<br />mixture: 0.91225817<br />mean: 0.6921150","penalty: 4.016751e-05<br />mixture: 0.92828321<br />mean: 0.6921150","penalty: 2.379139e-08<br />mixture: 0.93190862<br />mean: 0.6921150","penalty: 1.982090e-07<br />mixture: 0.93739012<br />mean: 0.6921150","penalty: 5.471364e-05<br />mixture: 0.93898273<br />mean: 0.6921150","penalty: 3.685841e-09<br />mixture: 0.94762538<br />mean: 0.6921150","penalty: 1.059800e-05<br />mixture: 0.95246321<br />mean: 0.6921150","penalty: 1.908776e-04<br />mixture: 0.96243729<br />mean: 0.6921150","penalty: 4.006064e-09<br />mixture: 0.96706519<br />mean: 0.6921150","penalty: 1.007810e-10<br />mixture: 0.98204523<br />mean: 0.6921150","penalty: 2.122699e-04<br />mixture: 0.98678584<br />mean: 0.6921150","penalty: 3.463080e-06<br />mixture: 0.99307135<br />mean: 0.6921150","penalty: 6.404894e-07<br />mixture: 0.05104062<br />mean: 0.6913574","penalty: 2.141840e-06<br />mixture: 0.06255611<br />mean: 0.6913574","penalty: 2.659641e-06<br />mixture: 0.06990574<br />mean: 0.6913574","penalty: 1.504869e-04<br />mixture: 0.07617499<br />mean: 0.6913574","penalty: 6.733681e-09<br />mixture: 0.08368818<br />mean: 0.6913574","penalty: 2.534068e-04<br />mixture: 0.08854015<br />mean: 0.6913574","penalty: 3.869215e-10<br />mixture: 0.09746279<br />mean: 0.6913574","penalty: 4.864196e-06<br />mixture: 0.10004275<br />mean: 0.6913574","penalty: 6.896769e-10<br />mixture: 0.10346528<br />mean: 0.6913574","penalty: 9.178118e-06<br />mixture: 0.10909150<br />mean: 0.6913574","penalty: 3.007206e-10<br />mixture: 0.11377613<br />mean: 0.6913574","penalty: 2.790419e-03<br />mixture: 0.12066578<br />mean: 0.6913574","penalty: 1.168968e-10<br />mixture: 0.12907343<br />mean: 0.6913574","penalty: 2.286096e-09<br />mixture: 0.13422120<br />mean: 0.6913574","penalty: 5.374098e-06<br />mixture: 0.14377522<br />mean: 0.6913574","penalty: 3.198848e-09<br />mixture: 0.14585258<br />mean: 0.6913574","penalty: 2.413692e-03<br />mixture: 0.15387686<br />mean: 0.6913574","penalty: 6.004992e-05<br />mixture: 0.16072314<br />mean: 0.6913574","penalty: 8.191074e-09<br />mixture: 0.17268290<br />mean: 0.6913574","penalty: 1.304407e-09<br />mixture: 0.17795210<br />mean: 0.6913574","penalty: 4.470999e-09<br />mixture: 0.18207178<br />mean: 0.6913574","penalty: 5.736282e-08<br />mixture: 0.19150149<br />mean: 0.6913574","penalty: 7.084452e-08<br />mixture: 0.19617181<br />mean: 0.6913574","penalty: 1.528010e-05<br />mixture: 0.19850273<br />mean: 0.6913574","penalty: 1.911850e-06<br />mixture: 0.20477561<br />mean: 0.6913574","penalty: 8.220975e-05<br />mixture: 0.20797406<br />mean: 0.6913574","penalty: 2.445081e-09<br />mixture: 0.21470457<br />mean: 0.6913574","penalty: 1.564100e-07<br />mixture: 0.22567927<br />mean: 0.6913574","penalty: 1.254573e-03<br />mixture: 0.22684271<br />mean: 0.6913574","penalty: 5.138816e-09<br />mixture: 0.23248310<br />mean: 0.6913574","penalty: 8.902268e-05<br />mixture: 0.24052105<br />mean: 0.6913574","penalty: 1.379339e-10<br />mixture: 0.24871754<br />mean: 0.6913574","penalty: 9.152142e-08<br />mixture: 0.25763025<br />mean: 0.6913574","penalty: 2.077720e-08<br />mixture: 0.26348808<br />mean: 0.6913574","penalty: 1.509156e-10<br />mixture: 0.26993853<br />mean: 0.6913574","penalty: 2.384386e-05<br />mixture: 0.27872704<br />mean: 0.6913574","penalty: 1.251889e-08<br />mixture: 0.28993369<br />mean: 0.6913574","penalty: 1.779975e-04<br />mixture: 0.29554768<br />mean: 0.6913574","penalty: 4.712620e-04<br />mixture: 0.29849571<br />mean: 0.6913574","penalty: 4.515854e-05<br />mixture: 0.31960334<br />mean: 0.6913574","penalty: 3.977050e-07<br />mixture: 0.32893088<br />mean: 0.6913574","penalty: 7.402597e-06<br />mixture: 0.33330943<br />mean: 0.6913574","penalty: 2.940038e-06<br />mixture: 0.34519230<br />mean: 0.6913574","penalty: 4.503905e-06<br />mixture: 0.35225867<br />mean: 0.6913574","penalty: 1.623946e-03<br />mixture: 0.58548526<br />mean: 0.6900948","penalty: 1.128299e-03<br />mixture: 0.84997619<br />mean: 0.6900948","penalty: 3.839517e-03<br />mixture: 0.32209742<br />mean: 0.6893372","penalty: 8.701457e-03<br />mixture: 0.07957855<br />mean: 0.6889187","penalty: 4.887305e-03<br />mixture: 0.39554567<br />mean: 0.6868119","penalty: 2.211354e-03<br />mixture: 0.90650251<br />mean: 0.6868119","penalty: 7.869956e-03<br />mixture: 0.31489755<br />mean: 0.6833890","penalty: 5.555110e-03<br />mixture: 0.49974209<br />mean: 0.6827438","penalty: 3.400504e-03<br />mixture: 0.88631112<br />mean: 0.6809762","penalty: 1.314401e-02<br />mixture: 0.18335381<br />mean: 0.6804176","penalty: 4.190718e-03<br />mixture: 0.75333061<br />mean: 0.6802186","penalty: 2.531544e-02<br />mixture: 0.13906286<br />mean: 0.6786222","penalty: 1.565963e-02<br />mixture: 0.37901434<br />mean: 0.6782749","penalty: 6.213855e-03<br />mixture: 0.78520724<br />mean: 0.6779426","penalty: 6.827303e-03<br />mixture: 0.67158593<br />mean: 0.6773176","penalty: 9.527556e-03<br />mixture: 0.68052457<br />mean: 0.6762547","penalty: 6.319747e-02<br />mixture: 0.05603853<br />mean: 0.6762371","penalty: 1.750148e-02<br />mixture: 0.21633938<br />mean: 0.6758444","penalty: 1.162185e-02<br />mixture: 0.73247358<br />mean: 0.6712504","penalty: 4.541379e-02<br />mixture: 0.33804602<br />mean: 0.6611384","penalty: 2.176980e-02<br />mixture: 0.64775210<br />mean: 0.6593357","penalty: 1.825885e-02<br />mixture: 0.75056986<br />mean: 0.6578651","penalty: 3.936262e-02<br />mixture: 0.53463373<br />mean: 0.6566304","penalty: 2.819375e-02<br />mixture: 0.74598031<br />mean: 0.6559852","penalty: 3.289141e-02<br />mixture: 0.85453800<br />mean: 0.6551487","penalty: 3.379935e-01<br />mixture: 0.12525226<br />mean: 0.6522772","penalty: 3.799719e-02<br />mixture: 0.97309848<br />mean: 0.6511679","penalty: 1.988309e-01<br />mixture: 0.15805604<br />mean: 0.6507563","penalty: 1.129502e-01<br />mixture: 0.30799187<br />mean: 0.6472920","penalty: 9.223827e-02<br />mixture: 0.50865893<br />mean: 0.5669047","penalty: 4.995399e-02<br />mixture: 0.92234065<br />mean: 0.5669047","penalty: 5.856580e-02<br />mixture: 0.83619476<br />mean: 0.5371067","penalty: 2.863137e+00<br />mixture: 0.06892800<br />mean: 0.5000000","penalty: 4.562072e+00<br />mixture: 0.16812513<br />mean: 0.5000000","penalty: 7.767461e-01<br />mixture: 0.25150363<br />mean: 0.5000000","penalty: 2.300435e+00<br />mixture: 0.26545812<br />mean: 0.5000000","penalty: 5.511241e+00<br />mixture: 0.27636304<br />mean: 0.5000000","penalty: 4.918095e-01<br />mixture: 0.28612390<br />mean: 0.5000000","penalty: 7.346256e+00<br />mixture: 0.30605164<br />mean: 0.5000000","penalty: 9.174934e-01<br />mixture: 0.34002928<br />mean: 0.5000000","penalty: 4.016610e+00<br />mixture: 0.36551271<br />mean: 0.5000000","penalty: 3.879600e-01<br />mixture: 0.37641344<br />mean: 0.5000000","penalty: 1.811847e+00<br />mixture: 0.42342624<br />mean: 0.5000000","penalty: 1.952405e-01<br />mixture: 0.45016589<br />mean: 0.5000000","penalty: 5.434039e-01<br />mixture: 0.45865129<br />mean: 0.5000000","penalty: 2.118403e+00<br />mixture: 0.46428629<br />mean: 0.5000000","penalty: 2.347520e-01<br />mixture: 0.47752236<br />mean: 0.5000000","penalty: 1.557029e-01<br />mixture: 0.51515726<br />mean: 0.5000000","penalty: 8.328369e+00<br />mixture: 0.52273149<br />mean: 0.5000000","penalty: 8.915607e-01<br />mixture: 0.54870951<br />mean: 0.5000000","penalty: 2.922682e-01<br />mixture: 0.55662500<br />mean: 0.5000000","penalty: 6.813185e-01<br />mixture: 0.57242079<br />mean: 0.5000000","penalty: 8.991341e+00<br />mixture: 0.61249096<br />mean: 0.5000000","penalty: 6.692126e+00<br />mixture: 0.61951437<br />mean: 0.5000000","penalty: 1.020834e-01<br />mixture: 0.65332221<br />mean: 0.5000000","penalty: 3.627315e+00<br />mixture: 0.68477991<br />mean: 0.5000000","penalty: 4.791377e+00<br />mixture: 0.76329173<br />mean: 0.5000000","penalty: 2.536015e+00<br />mixture: 0.77619330<br />mean: 0.5000000","penalty: 1.251436e+00<br />mixture: 0.80411076<br />mean: 0.5000000","penalty: 1.616939e+00<br />mixture: 0.82683241<br />mean: 0.5000000","penalty: 7.938077e-02<br />mixture: 0.86814091<br />mean: 0.5000000","penalty: 1.118257e+00<br />mixture: 0.87916492<br />mean: 0.5000000","penalty: 4.702915e-01<br />mixture: 0.91760181<br />mean: 0.5000000","penalty: 1.497910e-01<br />mixture: 0.95636769<br />mean: 0.5000000","penalty: 1.226185e-01<br />mixture: 0.95984680<br />mean: 0.5000000","penalty: 2.787600e-01<br />mixture: 0.98050119<br />mean: 0.5000000","penalty: 1.425388e+00<br />mixture: 0.99748847<br />mean: 0.5000000"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":["rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,6,87,1)","rgba(68,6,87,1)","rgba(69,8,88,1)","rgba(69,9,88,1)","rgba(69,15,91,1)","rgba(69,15,91,1)","rgba(69,22,95,1)","rgba(69,23,96,1)","rgba(70,27,98,1)","rgba(70,28,99,1)","rgba(70,28,99,1)","rgba(70,31,101,1)","rgba(70,31,102,1)","rgba(70,32,102,1)","rgba(70,33,103,1)","rgba(70,35,105,1)","rgba(70,35,105,1)","rgba(70,35,105,1)","rgba(69,43,111,1)","rgba(68,57,125,1)","rgba(67,60,127,1)","rgba(67,62,129,1)","rgba(66,64,131,1)","rgba(66,65,132,1)","rgba(66,66,133,1)","rgba(65,70,135,1)","rgba(65,72,136,1)","rgba(64,72,136,1)","rgba(64,77,136,1)","rgba(69,178,121,1)","rgba(69,178,121,1)","rgba(127,210,80,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)"],"opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":["rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,1,84,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,3,85,1)","rgba(68,6,87,1)","rgba(68,6,87,1)","rgba(69,8,88,1)","rgba(69,9,88,1)","rgba(69,15,91,1)","rgba(69,15,91,1)","rgba(69,22,95,1)","rgba(69,23,96,1)","rgba(70,27,98,1)","rgba(70,28,99,1)","rgba(70,28,99,1)","rgba(70,31,101,1)","rgba(70,31,102,1)","rgba(70,32,102,1)","rgba(70,33,103,1)","rgba(70,35,105,1)","rgba(70,35,105,1)","rgba(70,35,105,1)","rgba(69,43,111,1)","rgba(68,57,125,1)","rgba(67,60,127,1)","rgba(67,62,129,1)","rgba(66,64,131,1)","rgba(66,65,132,1)","rgba(66,66,133,1)","rgba(65,70,135,1)","rgba(65,72,136,1)","rgba(64,72,136,1)","rgba(64,77,136,1)","rgba(69,178,121,1)","rgba(69,178,121,1)","rgba(127,210,80,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)","rgba(253,231,37,1)"]}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0],"y":[0.25],"name":"44f692a6be19886d8fe8169058afb4d5","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FDE725"],[0.0033444816053510061,"#FBE726"],[0.0066889632107025908,"#F9E627"],[0.010033444816053597,"#F7E629"],[0.013377926421404602,"#F5E62A"],[0.016722408026755609,"#F3E52B"],[0.020066889632107194,"#F1E52C"],[0.023411371237458199,"#EFE52D"],[0.026755852842809204,"#EDE42E"],[0.030100334448160789,"#EBE42F"],[0.033444816053511794,"#E9E430"],[0.036789297658862803,"#E7E331"],[0.040133779264213812,"#E5E332"],[0.043478260869565397,"#E3E333"],[0.046822742474916398,"#E1E233"],[0.050167224080267407,"#DFE234"],[0.053511705685618992,"#DDE235"],[0.056856187290969994,"#DBE136"],[0.060200668896321002,"#D9E137"],[0.063545150501672004,"#D7E138"],[0.066889632107023589,"#D5E038"],[0.070234113712374605,"#D3E039"],[0.073578595317725606,"#D1E03A"],[0.076923076923077191,"#CFDF3B"],[0.080267558528428193,"#CDDF3B"],[0.083612040133779209,"#CBDF3C"],[0.08695652173913021,"#C8DE3D"],[0.090301003344481795,"#C6DE3E"],[0.093645484949832797,"#C4DE3E"],[0.096989966555183799,"#C2DD3F"],[0.10033444816053538,"#C0DD40"],[0.1036789297658864,"#BEDC40"],[0.1070234113712374,"#BCDC41"],[0.1103678929765884,"#BADC42"],[0.11371237458193999,"#B7DB42"],[0.117056856187291,"#B5DB43"],[0.120401337792642,"#B3DB44"],[0.12374581939799301,"#B1DA44"],[0.12709030100334459,"#AFDA45"],[0.13043478260869559,"#ACD946"],[0.13377926421404659,"#AAD946"],[0.13712374581939818,"#A8D947"],[0.14046822742474921,"#A6D847"],[0.14381270903010021,"#A3D848"],[0.14715719063545121,"#A1D748"],[0.1505016722408028,"#9FD749"],[0.1538461538461538,"#9DD74A"],[0.1571906354515048,"#9AD64A"],[0.16053511705685639,"#98D64B"],[0.16387959866220739,"#95D54B"],[0.16722408026755842,"#93D54C"],[0.17056856187290942,"#91D54C"],[0.173913043478261,"#8ED44D"],[0.17725752508361201,"#8CD44D"],[0.18060200668896301,"#89D34E"],[0.18394648829431459,"#87D34F"],[0.18729096989966559,"#84D34F"],[0.1906354515050166,"#81D250"],[0.1939799331103676,"#7FD250"],[0.19732441471571918,"#7CD151"],[0.20066889632107021,"#7AD151"],[0.20401337792642121,"#79D052"],[0.2073578595317728,"#78CF53"],[0.2107023411371238,"#77CF54"],[0.2140468227424748,"#76CE55"],[0.2173913043478258,"#75CD56"],[0.22073578595317739,"#74CD57"],[0.22408026755852839,"#73CC58"],[0.22742474916387942,"#72CB59"],[0.230769230769231,"#71CB5A"],[0.23411371237458201,"#70CA5B"],[0.23745819397993301,"#6FC95C"],[0.24080267558528401,"#6EC85D"],[0.24414715719063559,"#6DC85E"],[0.2474916387959866,"#6CC75F"],[0.25083612040133763,"#6BC660"],[0.25418060200668918,"#6AC661"],[0.25752508361204018,"#69C562"],[0.26086956521739119,"#67C463"],[0.26421404682274219,"#66C464"],[0.2675585284280938,"#65C365"],[0.2709030100334448,"#64C266"],[0.2742474916387958,"#63C166"],[0.27759197324414742,"#62C167"],[0.28093645484949842,"#61C068"],[0.28428093645484942,"#5FBF69"],[0.28762541806020042,"#5EBF6A"],[0.29096989966555198,"#5DBE6B"],[0.29431438127090298,"#5CBD6C"],[0.29765886287625398,"#5BBD6C"],[0.30100334448160559,"#59BC6D"],[0.3043478260869566,"#58BB6E"],[0.3076923076923076,"#57BB6F"],[0.3110367892976586,"#55BA70"],[0.31438127090301021,"#54B971"],[0.31772575250836121,"#53B971"],[0.32107023411371222,"#51B872"],[0.32441471571906377,"#50B773"],[0.32775919732441477,"#4EB674"],[0.33110367892976578,"#4DB675"],[0.33444816053511683,"#4BB575"],[0.33779264214046839,"#4AB476"],[0.34113712374581939,"#48B477"],[0.34448160535117039,"#47B378"],[0.34782608695652201,"#45B278"],[0.35117056856187301,"#43B279"],[0.35451505016722401,"#42B17A"],[0.35785953177257501,"#40B07B"],[0.36120401337792657,"#3EB07B"],[0.36454849498327763,"#3CAF7C"],[0.36789297658862863,"#3AAE7D"],[0.37123745819398019,"#38AE7E"],[0.37458193979933119,"#36AD7E"],[0.37792642140468219,"#34AC7F"],[0.38127090301003319,"#32AC80"],[0.3846153846153848,"#2FAB81"],[0.38795986622073581,"#2DAA81"],[0.39130434782608681,"#2AAA82"],[0.39464882943143836,"#27A983"],[0.39799331103678942,"#24A884"],[0.40133779264214042,"#22A884"],[0.40468227424749142,"#23A784"],[0.40802675585284298,"#23A684"],[0.41137123745819398,"#24A585"],[0.41471571906354499,"#24A485"],[0.4180602006688966,"#25A485"],[0.4214046822742476,"#25A385"],[0.4247491638795986,"#26A285"],[0.4280936454849496,"#26A186"],[0.43143812709030122,"#26A086"],[0.43478260869565222,"#27A086"],[0.43812709030100322,"#279F86"],[0.44147157190635478,"#279E86"],[0.44481605351170578,"#289D87"],[0.44816053511705678,"#289C87"],[0.45150501672240778,"#289B87"],[0.45484949832775939,"#299B87"],[0.4581939799331104,"#299A87"],[0.4615384615384614,"#299987"],[0.46488294314381301,"#299888"],[0.46822742474916401,"#2A9788"],[0.47157190635451501,"#2A9788"],[0.47491638795986602,"#2A9688"],[0.47826086956521757,"#2A9588"],[0.48160535117056857,"#2A9489"],[0.48494983277591963,"#2A9389"],[0.48829431438127119,"#2B9389"],[0.49163879598662219,"#2B9289"],[0.49498327759197319,"#2B9189"],[0.49832775919732419,"#2B9089"],[0.50167224080267581,"#2B8F8A"],[0.50501672240802675,"#2B8F8A"],[0.50836120401337781,"#2B8E8A"],[0.51170568561872942,"#2B8D8A"],[0.51505016722408037,"#2B8C8A"],[0.51839464882943143,"#2B8B8A"],[0.52173913043478237,"#2C8B8B"],[0.52508361204013398,"#2C8A8B"],[0.52842809364548504,"#2C898B"],[0.53177257525083599,"#2C888B"],[0.5351170568561876,"#2C878B"],[0.53846153846153855,"#2C878B"],[0.5418060200668896,"#2C868B"],[0.54515050167224066,"#2C858C"],[0.54849498327759216,"#2C848C"],[0.55183946488294322,"#2C838C"],[0.55518394648829417,"#2B838C"],[0.55852842809364578,"#2B828C"],[0.56187290969899684,"#2B818C"],[0.56521739130434778,"#2B808D"],[0.56856187290969884,"#2B7F8D"],[0.57190635451505034,"#2B7F8D"],[0.5752508361204014,"#2B7E8D"],[0.57859531772575246,"#2B7D8D"],[0.58193979933110396,"#2B7C8D"],[0.58528428093645501,"#2B7B8D"],[0.58862876254180596,"#2B7B8E"],[0.59197324414715702,"#2A7A8E"],[0.59531772575250863,"#2A798E"],[0.59866220735785958,"#2A788E"],[0.60200668896321063,"#2B778E"],[0.60535117056856158,"#2B778E"],[0.60869565217391319,"#2C768E"],[0.61204013377926425,"#2D758E"],[0.6153846153846152,"#2E748E"],[0.61872909698996681,"#2F738D"],[0.62207357859531776,"#2F728D"],[0.62541806020066881,"#30718D"],[0.62876254180601976,"#31718D"],[0.63210702341137137,"#31708D"],[0.63545150501672243,"#326F8D"],[0.63879598662207338,"#326E8D"],[0.64214046822742443,"#336D8D"],[0.64548494983277604,"#346C8D"],[0.64882943143812699,"#346B8C"],[0.6521739130434786,"#356B8C"],[0.65551839464882955,"#356A8C"],[0.65886287625418061,"#36698C"],[0.66220735785953155,"#36688C"],[0.66555183946488261,"#37678C"],[0.66889632107023422,"#37668C"],[0.67224080267558517,"#38658C"],[0.67558528428093678,"#38658C"],[0.67892976588628784,"#38648B"],[0.68227424749163879,"#39638B"],[0.68561872909698984,"#39628B"],[0.68896321070234079,"#3A618B"],[0.6923076923076924,"#3A608B"],[0.69565217391304335,"#3A5F8B"],[0.69899665551839496,"#3B5F8B"],[0.70234113712374602,"#3B5E8B"],[0.70568561872909696,"#3B5D8A"],[0.70903010033444802,"#3C5C8A"],[0.71237458193979897,"#3C5B8A"],[0.71571906354515058,"#3C5A8A"],[0.71906354515050164,"#3D598A"],[0.72240802675585314,"#3D598A"],[0.7257525083612042,"#3D588A"],[0.72909698996655525,"#3D578A"],[0.7324414715719062,"#3E568A"],[0.73578595317725726,"#3E5589"],[0.73913043478260876,"#3E5489"],[0.74247491638795982,"#3E5389"],[0.74581939799331076,"#3F5289"],[0.74916387959866237,"#3F5289"],[0.75250836120401343,"#3F5189"],[0.75585284280936438,"#3F5089"],[0.75919732441471544,"#3F4F89"],[0.76254180602006705,"#404E88"],[0.76588628762541799,"#404D88"],[0.76923076923076905,"#404C88"],[0.77257525083612055,"#404B88"],[0.77591973244147161,"#404A88"],[0.77926421404682256,"#404A88"],[0.78260869565217361,"#404988"],[0.78595317725752523,"#414888"],[0.78929765886287617,"#414787"],[0.79264214046822723,"#414687"],[0.79598662207357884,"#414587"],[0.79933110367892979,"#414487"],[0.80267558528428085,"#414386"],[0.80602006688963179,"#424285"],[0.8093645484949834,"#424185"],[0.81270903010033435,"#424184"],[0.81605351170568541,"#424083"],[0.81939799331103702,"#433F82"],[0.82274247491638797,"#433E81"],[0.82608695652173902,"#433D80"],[0.82943143812708997,"#433C7F"],[0.83277591973244158,"#433B7E"],[0.83612040133779264,"#443A7D"],[0.83946488294314359,"#44397D"],[0.8428093645484952,"#44387C"],[0.84615384615384615,"#44377B"],[0.8494983277591972,"#44367A"],[0.85284280936454826,"#443679"],[0.85618729096989976,"#443578"],[0.85953177257525082,"#453477"],[0.86287625418060176,"#453377"],[0.86622073578595338,"#453276"],[0.86956521739130443,"#453175"],[0.87290969899665538,"#453074"],[0.87625418060200644,"#452F73"],[0.87959866220735794,"#452E72"],[0.882943143812709,"#452D71"],[0.88628762541806005,"#452C70"],[0.88963210702341156,"#452B70"],[0.89297658862876261,"#462A6F"],[0.89632107023411356,"#46296E"],[0.89966555183946462,"#46286D"],[0.90301003344481623,"#46276C"],[0.90635451505016718,"#46266B"],[0.90969899665551823,"#46256B"],[0.91304347826086985,"#46246A"],[0.91638795986622079,"#462369"],[0.91973244147157185,"#462268"],[0.9230769230769228,"#462167"],[0.92642140468227441,"#462066"],[0.92976588628762535,"#461F65"],[0.93311036789297641,"#461E65"],[0.93645484949832802,"#461D64"],[0.93979933110367897,"#461B63"],[0.94314381270903003,"#461A62"],[0.94648829431438097,"#451961"],[0.94983277591973259,"#451860"],[0.95317725752508364,"#451760"],[0.95652173913043459,"#45155F"],[0.9598662207357862,"#45145E"],[0.96321070234113715,"#45135D"],[0.96655518394648821,"#45115C"],[0.96989966555183926,"#45105B"],[0.97324414715719076,"#450E5B"],[0.97658862876254182,"#450D5A"],[0.97993311036789277,"#450B59"],[0.98327759197324438,"#450958"],[0.98662207357859544,"#450857"],[0.98996655518394638,"#440656"],[0.99331103678929744,"#440456"],[0.99665551839464894,"#440355"],[1,"#440154"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"thickness":23.039999999999996,"title":"AUC","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickmode":"array","ticktext":["0.50","0.55","0.60","0.65"],"tickvals":[0.0016666666666666668,0.26105996523219777,0.52045326379772838,0.77984656236325955],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"PCA Preprocessing, Elastic Net","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.050000000000000003,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Penalty","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.0037182264266390069,1.0448108598783641],"tickmode":"array","ticktext":["0.25","0.50","0.75","1.00"],"tickvals":[0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Mixture","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"AUC","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3498d7d6ae":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"3498d7d6ae","visdat":{"3498d7d6ae":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>By inspecting the plotly object, the parameters are chosen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>pca_log_penalty <span class="ot">&lt;-</span> <span class="fl">0.3379935</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>pca_log_mixture <span class="ot">&lt;-</span> <span class="fl">0.12525226</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="gather-manually-chosen-hyperparameters" class="level3" data-number="15.11.7">
<h3 data-number="15.11.7" class="anchored" data-anchor-id="gather-manually-chosen-hyperparameters"><span class="header-section-number">15.11.7</span> Gather Manually Chosen Hyperparameters</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>tuning_params_result_manual <span class="ot">&lt;-</span> <span class="fu">tribble</span>(<span class="sc">~</span>wflow_id, <span class="sc">~</span>penalty, <span class="sc">~</span>mixture,</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"stand_log_lasso"</span>, stand_log_lasso_penalty, <span class="dv">1</span>,</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"stand_log_ridge"</span>, stand_log_ridge_penalty, <span class="dv">0</span>,</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"stand_log"</span>, stand_log_penalty, stand_log_mixture,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"pca_log_lasso"</span>, pca_log_lasso_penalty, <span class="dv">1</span>,</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"pca_log_ridge"</span>, pca_log_ridge_penalty, <span class="dv">0</span>,</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"pca_log"</span>, pca_log_penalty, pca_log_mixture)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="finalize-fit-and-predict-with-manually-chosen-hyperparameters" class="level2" data-number="15.12">
<h2 data-number="15.12" class="anchored" data-anchor-id="finalize-fit-and-predict-with-manually-chosen-hyperparameters"><span class="header-section-number">15.12</span> Finalize, Fit and Predict with Manually Chosen Hyperparameters</h2>
<p>The finalization, fitting and predicting is done as before, but with the manually chosen hyperparameters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Finalize</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>workflow_set_final_manual <span class="ot">&lt;-</span> workflow_ids <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(id) {</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    grid_results <span class="sc">|&gt;</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">extract_workflow</span>(id) <span class="sc">|&gt;</span> </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">finalize_workflow</span>(tuning_params_result_manual <span class="sc">|&gt;</span> </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">filter</span>(wflow_id <span class="sc">==</span> id))</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(workflow_set_final_manual) <span class="ot">&lt;-</span> workflow_ids</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>workflow_set_fit_manual <span class="ot">&lt;-</span> workflow_ids <span class="sc">|&gt;</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(id) {</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    workflow_set_final_manual[[id]] <span class="sc">|&gt;</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">last_fit</span>(<span class="at">split =</span> count_matrix_clr_split)</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(workflow_set_fit_manual) <span class="ot">&lt;-</span> workflow_ids</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>roc_auc_results_manual <span class="ot">&lt;-</span> workflow_ids <span class="sc">|&gt;</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(id) {</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    workflow_set_fit_manual[[id]] <span class="sc">|&gt;</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">collect_predictions</span>() <span class="sc">|&gt;</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">roc_curve</span>(<span class="at">truth =</span> Patient_status,</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>                .pred_MS,</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>                <span class="at">event_level =</span> <span class="st">"second"</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">wflow_id =</span> id)</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>()</span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize performance</span></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>roc_auc_results_manual <span class="sc">|&gt;</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span> <span class="sc">-</span> specificity,</span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> sensitivity,</span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> wflow_id)) <span class="sc">+</span> </span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">lwd =</span> <span class="dv">1</span>,</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">lty =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span> </span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="apply02_model_lin_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="session-info" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> Session Info</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>sessioninfo<span class="sc">::</span><span class="fu">session_info</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.3.3 (2024-02-29 ucrt)
 os       Windows 11 x64 (build 22631)
 system   x86_64, mingw32
 ui       RTerm
 language (EN)
 collate  English_United Kingdom.utf8
 ctype    English_United Kingdom.utf8
 tz       Europe/Copenhagen
 date     2024-05-25
 pandoc   3.1.11 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)

─ Packages ───────────────────────────────────────────────────────────────────
 package      * version    date (UTC) lib source
 backports      1.4.1      2021-12-13 [1] CRAN (R 4.3.1)
 broom        * 1.0.5      2023-06-09 [1] CRAN (R 4.3.3)
 cachem         1.0.8      2023-05-01 [1] CRAN (R 4.3.3)
 class          7.3-22     2023-05-03 [2] CRAN (R 4.3.3)
 cli            3.6.2      2023-12-11 [1] CRAN (R 4.3.3)
 cluster        2.1.6      2023-12-01 [2] CRAN (R 4.3.3)
 codetools      0.2-19     2023-02-01 [2] CRAN (R 4.3.3)
 colorspace     2.1-0      2023-01-23 [1] CRAN (R 4.3.3)
 conflicted     1.2.0      2023-02-01 [1] CRAN (R 4.3.3)
 crosstalk      1.2.1      2023-11-23 [1] CRAN (R 4.3.3)
 data.table     1.15.4     2024-03-30 [1] CRAN (R 4.3.3)
 dials        * 1.2.1      2024-02-22 [1] CRAN (R 4.3.3)
 DiceDesign     1.10       2023-12-07 [1] CRAN (R 4.3.3)
 digest         0.6.35     2024-03-11 [1] CRAN (R 4.3.3)
 dplyr        * 1.1.4      2023-11-17 [1] CRAN (R 4.3.2)
 ellipsis       0.3.2      2021-04-29 [1] CRAN (R 4.3.3)
 evaluate       0.23       2023-11-01 [1] CRAN (R 4.3.3)
 fansi          1.0.6      2023-12-08 [1] CRAN (R 4.3.3)
 farver         2.1.1      2022-07-06 [1] CRAN (R 4.3.3)
 fastmap        1.1.1      2023-02-24 [1] CRAN (R 4.3.3)
 foreach        1.5.2      2022-02-02 [1] CRAN (R 4.3.3)
 furrr          0.3.1      2022-08-15 [1] CRAN (R 4.3.3)
 future         1.33.2     2024-03-26 [1] CRAN (R 4.3.3)
 future.apply   1.11.2     2024-03-28 [1] CRAN (R 4.3.3)
 generics       0.1.3      2022-07-05 [1] CRAN (R 4.3.3)
 ggplot2      * 3.5.1      2024-04-23 [1] CRAN (R 4.3.3)
 glmnet       * 4.1-8      2023-08-22 [1] CRAN (R 4.3.3)
 globals        0.16.3     2024-03-08 [1] CRAN (R 4.3.3)
 glue           1.7.0      2024-01-09 [1] CRAN (R 4.3.3)
 gower          1.0.1      2022-12-22 [1] CRAN (R 4.3.1)
 GPfit          1.0-8      2019-02-08 [1] CRAN (R 4.3.3)
 gtable         0.3.5      2024-04-22 [1] CRAN (R 4.3.3)
 hardhat        1.3.1      2024-02-02 [1] CRAN (R 4.3.3)
 hms            1.1.3      2023-03-21 [1] CRAN (R 4.3.3)
 htmltools      0.5.8.1    2024-04-04 [1] CRAN (R 4.3.3)
 htmlwidgets    1.6.4      2023-12-06 [1] CRAN (R 4.3.3)
 httr           1.4.7      2023-08-15 [1] CRAN (R 4.3.3)
 infer        * 1.0.7      2024-03-25 [1] CRAN (R 4.3.3)
 ipred          0.9-14     2023-03-09 [1] CRAN (R 4.3.3)
 iterators      1.0.14     2022-02-05 [1] CRAN (R 4.3.3)
 jsonlite       1.8.8      2023-12-04 [1] CRAN (R 4.3.3)
 knitr          1.46       2024-04-06 [1] CRAN (R 4.3.3)
 labeling       0.4.3      2023-08-29 [1] CRAN (R 4.3.1)
 lattice      * 0.22-5     2023-10-24 [2] CRAN (R 4.3.3)
 lava           1.8.0      2024-03-05 [1] CRAN (R 4.3.3)
 lazyeval       0.2.2      2019-03-15 [1] CRAN (R 4.3.3)
 lhs            1.1.6      2022-12-17 [1] CRAN (R 4.3.3)
 lifecycle      1.0.4      2023-11-07 [1] CRAN (R 4.3.3)
 listenv        0.9.1      2024-01-29 [1] CRAN (R 4.3.3)
 lubridate      1.9.3      2023-09-27 [1] CRAN (R 4.3.3)
 magrittr       2.0.3      2022-03-30 [1] CRAN (R 4.3.3)
 MASS           7.3-60.0.1 2024-01-13 [2] CRAN (R 4.3.3)
 Matrix       * 1.6-5      2024-01-11 [2] CRAN (R 4.3.3)
 memoise        2.0.1      2021-11-26 [1] CRAN (R 4.3.3)
 mgcv           1.9-1      2023-12-21 [2] CRAN (R 4.3.3)
 modeldata    * 1.3.0      2024-01-21 [1] CRAN (R 4.3.3)
 munsell        0.5.1      2024-04-01 [1] CRAN (R 4.3.3)
 nlme           3.1-164    2023-11-27 [2] CRAN (R 4.3.3)
 nnet           7.3-19     2023-05-03 [2] CRAN (R 4.3.3)
 parallelly     1.37.1     2024-02-29 [1] CRAN (R 4.3.3)
 parsnip      * 1.2.1      2024-03-22 [1] CRAN (R 4.3.3)
 permute      * 0.9-7      2022-01-27 [1] CRAN (R 4.3.3)
 pillar         1.9.0      2023-03-22 [1] CRAN (R 4.3.3)
 pkgconfig      2.0.3      2019-09-22 [1] CRAN (R 4.3.3)
 plotly         4.10.4     2024-01-13 [1] CRAN (R 4.3.3)
 prodlim        2023.08.28 2023-08-28 [1] CRAN (R 4.3.3)
 purrr        * 1.0.2      2023-08-10 [1] CRAN (R 4.3.3)
 R6             2.5.1      2021-08-19 [1] CRAN (R 4.3.3)
 Rcpp           1.0.12     2024-01-09 [1] CRAN (R 4.3.3)
 readr          2.1.5      2024-01-10 [1] CRAN (R 4.3.3)
 recipes      * 1.0.10     2024-02-18 [1] CRAN (R 4.3.3)
 rlang          1.1.3      2024-01-10 [1] CRAN (R 4.3.3)
 rmarkdown      2.26       2024-03-05 [1] CRAN (R 4.3.3)
 rpart          4.1.23     2023-12-05 [2] CRAN (R 4.3.3)
 rsample      * 1.2.1      2024-03-25 [1] CRAN (R 4.3.3)
 rstudioapi     0.16.0     2024-03-24 [1] CRAN (R 4.3.3)
 scales       * 1.3.0      2023-11-28 [1] CRAN (R 4.3.3)
 sessioninfo    1.2.2      2021-12-06 [1] CRAN (R 4.3.3)
 shape          1.4.6.1    2024-02-23 [1] CRAN (R 4.3.2)
 stringi        1.8.3      2023-12-11 [1] CRAN (R 4.3.2)
 stringr        1.5.1      2023-11-14 [1] CRAN (R 4.3.3)
 survival       3.5-8      2024-02-14 [2] CRAN (R 4.3.3)
 tibble       * 3.2.1      2023-03-20 [1] CRAN (R 4.3.3)
 tidymodels   * 1.2.0      2024-03-25 [1] CRAN (R 4.3.3)
 tidyr        * 1.3.1      2024-01-24 [1] CRAN (R 4.3.3)
 tidyselect     1.2.1      2024-03-11 [1] CRAN (R 4.3.3)
 timechange     0.3.0      2024-01-18 [1] CRAN (R 4.3.3)
 timeDate       4032.109   2023-12-14 [1] CRAN (R 4.3.2)
 tune         * 1.2.1      2024-04-18 [1] CRAN (R 4.3.3)
 tzdb           0.4.0      2023-05-12 [1] CRAN (R 4.3.3)
 utf8           1.2.4      2023-10-22 [1] CRAN (R 4.3.3)
 vctrs          0.6.5      2023-12-01 [1] CRAN (R 4.3.3)
 vegan        * 2.6-4      2022-10-11 [1] CRAN (R 4.3.3)
 viridisLite    0.4.2      2023-05-02 [1] CRAN (R 4.3.3)
 withr          3.0.0      2024-01-16 [1] CRAN (R 4.3.3)
 workflows    * 1.1.4      2024-02-19 [1] CRAN (R 4.3.3)
 workflowsets * 1.1.0      2024-03-21 [1] CRAN (R 4.3.3)
 xfun           0.43       2024-03-25 [1] CRAN (R 4.3.3)
 yaml           2.3.8      2023-12-11 [1] CRAN (R 4.3.2)
 yardstick    * 1.3.1      2024-03-21 [1] CRAN (R 4.3.3)

 [1] C:/Users/Willi/AppData/Local/R/win-library/4.3
 [2] C:/Program Files/R/R-4.3.3/library

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./apply01_model_diversity.html" class="pagination-link" aria-label="Diversity Measures">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Diversity Measures</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./apply03_model_non_lin.html" class="pagination-link" aria-label="Non-Linear Modelling">
        <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Non-Linear Modelling</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>